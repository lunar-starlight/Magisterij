\section{Snopi nad okolišem}

Naj \(X, Y, …\) označujejo okoliše.



\begin{definicija}
  \emph{Predsnop nad okolišem \(X\)} je funktor \(F : \op{\O{\p{X}}} → \setcat\).
  Elementom množic \(F(U)\) pravimo \emph{prerezi (pri U)}.
\end{definicija}

\begin{opomba}
  Predsnope lahko definiramo tudi nad poljubno kategorijo \(\cat C\).
  V tem primeru pišemo \(\psh{\cat C} ≔ \op{\cat C} → \setcat\), za predsnope nad okolišem
  \(X\) pa raje spustimo \(\mc{O}\) in pišemo kar \(\psh{X}\).
\end{opomba}

Preden lahko definiramo snope, moramo nekaj povedati o družinah prerezov.

\begin{definicija}
  Prereza \(s ∈ F(U)\) in \(t ∈ F(V)\) sta \emph{skladna}, ko velja \(s\res{V} = t\res{U}\).
  Družina prerezov \(sᵢ ∈ F(Uᵢ)\) je \emph{skladna}, ko so njeni elementi paroma
  skladni. Prerez je \emph{skladen} z družino, ko je paroma skladen z vsemi
  njenimi elementi.
\end{definicija}

\begin{definicija}
  \emph{Snop nad okolišem} je predsnop, za katerega velja:
  \begin{enumerate}
  \item Za vsako skladno družino prerezov \(sᵢ ∈ F(Uᵢ)\) obstaja enoličen prerez
    \({s ∈ F\p{⋃ᵢUᵢ}}\), ki je skladen z družino.
  \item Za vsako pokritje \(Uᵢ \circlearrowright U\) in skladno družino prerezov \(sᵢ ∈ F(Uᵢ)\) obstaja enoličen prerez
    \(s ∈ F(U)\), ki je skladen z družino.
  \item Za vsako skladno družino prerezov \(sᵢ\) na \(Uᵢ\) obstaja enoličen prerez
    \(s\) na \(⋃ᵢUᵢ\), ki je skladen z družino.
  % \item Za vsako skladno družino prerezov \(sᵢ : Uᵢ\) obstaja enoličen prerez
  %   \(s : ⋃ᵢUᵢ\), ki je skladen z družino.
  \item Za vsako skladno družino prerezov \(Uᵢ ⊩ sᵢ\) obstaja enoličen prerez
    \({⋃ᵢUᵢ ⊩ s}\), ki je skladen z družino.
  \item Za vsako skladno družino prerezov \(Uᵢ ⊩ sᵢ ∈ F\) obstaja enoličen prerez
    \({⋃ᵢUᵢ ⊩ s ∈ F}\), ki je skladen z družino.
  % \item Za vsak par prerezov \(s, t ∈ F(U)\), je \(s = t\) natanko tedaj, ko za
  %   pokritje \(Uᵢ \circlearrowright U\) velja,
  \end{enumerate}
\end{definicija}

\begin{definicija} %TODO: popravi ta vsaj unija biznis
  \emph{Amalgamacija} družine prerezov je vsak prerez, ki je definiran vsaj na
  uniji družine in je z njo skladen.
\end{definicija}

\begin{opomba}
  Če družina ni skladna očitno nima amalgamacije.
\end{opomba}
\begin{slogan}
  Vsaka skladna družina prerezov v snopu ima enolično amalgamacijo.
\end{slogan}
\begin{slogan}
  Predsnop je snop, kadar ima vsaka skladna družina prerezov enolično amalgamacijo.
\end{slogan}

\begin{definicija}
  Preslikava med (pred)snopoma \(F\) in \(G\) je naravna transformacija med
  njima kot funktorjema.
\end{definicija}

\begin{definicija}
  Kategoriji vseh snopov na \(X\), skupaj z morfizmi med njimi pravimo \(\sh X\).
\end{definicija}


\subsection{Prezentacije snopov}

\begin{definicija}
  \emph{\(𝓛\)-vrednotena množica} oziroma \emph{\(𝓛\)-množica} je množica \(A\),
  skupaj s preslikavo, ki jo pišemo \(⟦- = -⟧ : A×A → 𝓛\), tako da velja
  \begin{align*}
    ⟦ a = b ⟧ ≤ ⟦ b = a ⟧\\
    ⟦ a = b ⟧ ∧ ⟦ b = c ⟧ ≤ ⟦ a = c ⟧
  \end{align*}
  Če iz konteksta ni razvidno kateri množici pripada preslikava \(⟦- = -⟧\),
  jo pišemo z indeksom.
\end{definicija}

Če na okvir \(𝓛\) mislimo kot množico resničnostnih vrednosti, lahko rečemo, da je to simetrična in tranzitivna relacija na množici \(A\).
%TODO: jezik 𝓛-množic?

\begin{definicija}
  \emph{Morfizem med \(𝓛\)-množicama} \(A\) in \(B\) je preslikava \(⟦- = f(-)⟧ : B×A → 𝓛\),
  za katero velja
  \begin{align*}
    ⟦b = b'⟧ ∧ ⟦b' = f(a)⟧ ≤ ⟦b = f(a)⟧\\
    ⟦b = f(a)⟧ ∧ ⟦a = a'⟧ ≤ ⟦b = f(a')⟧\\
    ⟦b = f(a)⟧ ∧ ⟦b' = f(a)⟧ ≤ ⟦b = b'⟧\\
    ⟦a = a⟧ = \bigvee_{b ∈ B} ⟦b = f(a)⟧
  \end{align*}
  Na prvi dve pravili lahko gledamo kot na skladnost z relacijama na \(A\) in \(B\), na drugi dve pa kot na enoličnost in celovitost, zato pišemo morfizme tudi v bolj funkcijskem zapisu kot \(f : A \looparrowright B\).

  Če imamo morfizma \(A \oset f \looparrowright B \oset g \looparrowright C\),
  je njun kompozitum \(gf : A \looparrowright C\) definiran kot
  \[ ⟦c = gf(a)⟧ ≔ \bigvee_{b ∈ B} ⟦c = g(b)⟧∧⟦b = f(a)⟧\text. \]
\end{definicija}

Skupaj z identiteto \(⟦- = -⟧_A\) tvorijo \(𝓛\)-množice kategorijo, ki jo označimo \(\cat{Set}(𝓛)\).

\begin{lema}
  Naj bosta \(f, g : A \looparrowright B\) morfizma.
  Potem sta enaka natanko tedaj, ko velja
  \[ \for{a ∈ A, b ∈ B}{ ⟦b = f(a)⟧ ≤ ⟦b = g(a)⟧ }.\]
\end{lema}
\begin{dokaz}
  V eno smer je trditev očitna, tako da predpostavimo,
  da za vsaka \(a\) in \(b\) velja \(⟦b = f(a)⟧ ≤ ⟦b = g(a)⟧\).
  Dokazati moramo torej, da velja tudi druga neenakost.
  \begin{align*}
    ⟦b = g(a)⟧
    &= ⟦b = g(a)⟧ ∧ ⟦a = a⟧ = ⟦b = g(a)⟧ ∧ \bigvee_{b' ∈ B} ⟦b' = f(a)⟧\\
    &= \bigvee_{b' ∈ B} ⟦b = g(a)⟧ ∧ ⟦b' = f(a)⟧ ∧ ⟦b' = g(a)⟧
    &≤ \bigvee_{b' ∈ B} ⟦b = b'⟧ ∧ ⟦b' = f(a)⟧
    &= ⟦b = 1_Bf(a)⟧ = ⟦b = f(a)⟧.
  \end{align*}
\end{dokaz}

Če na zgornjo formulo gledamo kot neko trditev v jeziku množic in funkcij, bi se brala kot "če je \(f(a) = b\) je potem tudi \(g(a) = b\)", kar pa ponavadi res pomeni, da sta funkciji \(f\) in \(g\) enaki.

Na podoben način bi si želeli karakterizirati epimorfizme in monomorfizme, v kategoriji \(\cat{Set}(𝓛)\),
in res jih lahko karakteriziramo kot surjekcije in injekcije v tem jeziku:

\begin{trditev}
  Morfizem \(f : A \looparrowright B\) je epimorfizem, če velja
  \[ \for{b ∈ B}{ ⟦b = b⟧ = \bigvee_{a ∈ A} ⟦b = f(a)⟧ }\text, \]
  in monomorfizem, če velja
  \[ \for{a,a' ∈ A, b ∈ B}{ ⟦b = f(a)⟧ ∧ ⟦b = f(a')⟧ ≤ ⟦a = a'⟧}\text. \]
\end{trditev}
\begin{dokaz}
  %TODO: dokaz
  long and arduous
\end{dokaz}

\subsubsection{Karakterizacija podobjektov}

Z uporabo gornje karakterizacije monomorfizmov, lahko karakteriziramo tudi podobjekte.

\begin{definicija}
  \(𝓛\)-podmnožica \(A\) je preslikava \( ⟦- ∈ S⟧ : A → 𝓛 \), za katero velja
  \begin{align*}
    ⟦a ∈ S⟧ ≤ ⟦a = a⟧\\
    ⟦a = a'⟧ ∧ ⟦a' ∈ S⟧ ≤ ⟦a ∈ S⟧
  \end{align*}
  t.~j. je skladna z relacijo na \(A\).
\end{definicija}

\begin{trditev}
  Obstaja ekvivalenca med delnima ureditvima \(𝓛\)-podmnožic \(A\) in podobjektov \(A\).
\end{trditev}
\begin{proof}
  Naj bo \(m : S \looprightarrow A\) monomorfizem \(𝓛\)-množic.
  Potem definiramo preslikavo \( ⟦- ∈ S⟧ : A → 𝓛 \) s predpisom
  \(a ↦ \bigvee_{s ∈ S} ⟦a = m(s)⟧\).

  %TODO: complete proof
\end{proof}

\subsubsection{Polne \texorpdfstring{\(𝓛\)}{𝓛}-množice}

Naj bo \(F\) snop nad \(𝓛\). Potem lahko za \(m ∈ F(U)\) definiramo enojec
\(⟦a ∈ ⟨m⟩⟧ ≔ ⟦a = m⟧\), kjer je \(a ∈ F(V), V ∈ 𝓛\).
Na enojcih lahko definiramo tudi \(⟦⟨m⟩ = ⟨n⟩⟧ ≔ ⟦m = n⟧\).
Snop \(F\) lahko sedaj rekonstruiramo iz njegovih enojcev.
Podobno bomo storili za \(𝓛\)-množice.

\begin{definicija}
  \emph{Enojec} na \(𝓛\)-množici \(A\) je \(𝓛\)-podmnožica \(S\), za katero velja
  \(\for{a,b ∈ S}{⟦a ∈ S⟧ ∧ ⟦b ∈ S⟧ ≤ ⟦a = b⟧} \).
\end{definicija}

\begin{lema}
  Za vsak \(m ∈ A\) lahko tvorimo enojec \(\sigma_m : A → 𝓛\), s predpisom
  \(a ↦ ⟦a = m⟧\). Množico enojcev \(A\) označimo s \(\sigma(A)\).
\end{lema}

Snopi so natanko določeni s svojimi enojci, tako da si poglejmo \(𝓛\)-množice, ki so prav tako določene s svojimi enojci.

\begin{definicija}
  \(𝓛\)-množica \(A\) je \emph{polna}, kadar je preslikava \(m ↦ \sigma_m\) bijekcija.
  Polno podkategorijo polnih \(𝓛\)-množic označimo s \(\cat{CSet}(𝓛)\).
\end{definicija}

\begin{izrek}
  Množica \(\sigma(A)\), skupaj z relacijo \(⟨\rho, \tau⟩ ≔ \bigvee_{a ∈ A} \rho(a)∧\tau(a)\)
  je \(𝓛\)-množica, ki je izomorfna \(A\).
\end{izrek}
\begin{dokaz}
  %TODO: dokaz
\end{dokaz}

\begin{trditev}
  %TODO: morfizmi v polne 𝓛-množice so funkcije
\end{trditev}

\begin{izrek}
  Kategorija polnih \(𝓛\)-množic je ekvivalentna kategoriji snopov nad \(𝓛\).
\end{izrek}



%%% Local Variables:
%%% TeX-master: "main"
%%% End:
