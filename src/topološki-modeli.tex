\section{Topološki modeli}\label{sec:modeli}

% Teorija modelov morda zveni kot zelo abstraktna in filozofska zadeva (govora je
% o matematičnih svetovih), vendar je pa ideja sama blizu vsakemu matematiku, ki
% je dokončal drugi letnik dodiplomskega študija.
% Situacija je namreč zelo podobna teoriji grup. Struktura grupe je skupek
% aksiomov (tako kot jih ima konstruktivna logika ali pa teorija množic), medtem
% ko so pa grupe same natanko \emph{modeli} teh aksiomov, in na model logike
% mislimo na isti način.

% Seveda pa grupe niso edina struktura, za katero lahko izvedemo to analogijo.
% Lahko tudi gledamo modele monoidne, kolobarske, vektorske,~itd.~strukture, prav
% tako pa lahko gledamo modele topološke strukture ali pa modele izračunljivostne
% strukture (recimo turingove stroje).

% V logiki in teoriji množic, se pogosto sprašujemo, ali so kakšne trditve
% \emph{neodvisne} od aksiomov našega sistema. Na primer aksiom izbire je
% neodvisen od preostalih aksiomov teorije množic, hipoteza kontinuuma je
% neodvisna od teorije množic z izbiro,~itd. Neodvisnost je mogoče malce
% nedostopen pojem, še posebej za matematike, ki verjamejo v absolutno resnico.
% Namreč, kako lahko trditev ni niti resnična niti neresnična? Ampak bistvo je v
% tem, da trditev ima resničnostno vrednost \emph{v vseh modelih}, vendar če je ta
% resničnostna vrednost različna v različnih modelih, je trditvi ne moremo
% dodeliti, tako da bo bilo to res v vseh modelih! Ključno je namreč, da noben
% model logike ni \emph{odlikovan}, torej nimamo \quot{standardnega modela}.

% To se vse sliši nekoliko komplicirano, a nam je zares že intimno znano. V
% teoriji grup namreč vemo za \quot{komutativnost}, za katero vemo, da se je ne da
% dokazati iz aksiomov grupe, prav tako pa ne velja njena negacija. To pa vemo
% natanko zato, ker obstajajo in komutativne in nekomutativne grupe (oziroma
% modeli aksiomov grup). V teoriji grup prav tako nimamo \quot{standardne grupe},
% za katero velja natanko vse kar velja za vse grupe.

% V logiki takim stvarem pravimo \quot{neodvisne trditve}, v teoriji
% izračunljivosti tem pravimo \quot{neizračunljive funkcije}, v algebri in
% topologiji pa \quot{lastnosti algebraične strukture oz.~topološkega prostora}.

% Skratka, prehod med aksiomatskim sistemom in modeli nam je kot matematikom znan,
% v algebri smo bili z njim vzgojeni že od malega, a v logiki te sreče žal nismo
% imeli. Tako se moramo na stara leta pruičiti teh metod, ki so pa logikom brez
% dvoma enako pomembne kot so grupe algebrajikom, ali pa prostori topologom.

% Kot smo pa omenili v uvodu, pa obstajajo modeli logike, ki so zgrajeni iz
% topoloških prostorov. Tem pravimo topološki modeli, in vse logične trditve v tem
% modelu se prevedejo v topološke trditve o topološkem prostoru. Sledi naravno
% vprašanje, ali lahko vzpostavimo nekak slovar med neodvisnimi trditvami
% (t.~j.~klasičnimi principi v konstruktivni logiki) in topološkimi lastnostmi, ki
% so nam znane.

% Do tega se vrnemo kasneje, v naslednjem razdelku, za zdaj nas pa čaka malo
% teorije snopov, da lahko topološke modele sploh definiramo.

% TODO: rewrite

% Oglejmo si najprej primer zveznih funkcij iz \(X\) v \(ℝ\).
% Zanje se vedno lahko vprašamo, če so pozitivne, negativne, ali so gladke,
% ipd.~vendar nas pogosto zanima tudi \emph{kje} za določeno funkcijo neka
% lastnost velja. Recimo preprosto, da je \(f : ℝ → ℝ\) identiteta. Tedaj je
% pozitivna na \((0,∞)\), negativna na \((-∞,0)\), gladka pa na celem \(ℝ\).
% Klasično je pozitivnost funkcije resničnostna vrednost. Z drugimi besedami,
% pozitivnost je predikat na (zveznih) realnih funkcijah. Mi pa zares želimo
% opredeliti, kje ta lastnost velja, ne zgolj če velja na celem prostoru.
% Želimo torej, da ima ``prava'' pozitivnost vrednosti v podmnožicah prostora
% \(X\), in da bo imela topologija \(X\) kaj vpliva naj bodo to zgolj odprte
% podmnožice.

% Želimo pa tudi obravnavati funkcije, ki niso definirane na celotni domeni, na
% primer \(x ↦ x⁻¹\). Tako naš primer razširimo na množico vseh funkcij \(U → ℝ\),
% kjer je \(U ∈ 𝒪X\), in označimo množico vseh teh funkcij z \(R\). Potem pa za
% \(f ∈ R\) definiramo \emph{definicijsko območje} oziroma \emph{razpon} kot
% domeno funkcije \(f\), in ga označimo \(‖f‖\).
% Na to množico lahko sedaj uvedemo predikat enakosti, ki seveda meri, na kateri
% množici se dve funkciji ujemata, na očiten način:
% \[ ⟦f = g⟧ = \int\set{t ∈ ‖f‖∩‖g‖}{f(t) = g(t)}\text. \]

% Ni naključje, da preslikavam \(R → 𝒪X\) pravimo predikati, saj se da pokazati,
% da za vsako polno Heytingovo algebro (kar \(𝒪X\) je) obstaja nek model
% konstruktivne matematike, tako da so resničnostne vrednosti natanko odprte
% množice \(X\). V tem smislu \(⟦f = g⟧\) predstavlja kar enakost med funkcijami,
% \(‖f‖\) je pa predikat obstoja elementa \(‖f‖ = \exist{f : R}{⊤}\). Velja tudi
% enakost \(‖f‖ = ⟦f = f⟧\), torej zares predikata \(‖-‖\) ne potrebujemo.

% V splošnem, množicam kot so \(R\), torej takim, da imajo definirano enakost z
% vrednostmi v \(𝒪X\) pravimo \emph{Heytingovo vrednotene množice},
% \emph{\(𝒪X\) vrednotene množice}, ali na kratko \emph{\(𝒪X\)-množice}.

V tem razdelku najprej podrobno opišemo, kako interpretiramo logiko odprtih
množic v topološkem prostoru samem. Kasneje potem to logiko razširimo do logike
višjega reda.


\subsection{Logika odprtih množic}\label{sec:modeli-logika-odprtih}

Naj bo \(X\) topološki prostor. Podrobno si oglejmo kako logične operacije
delujejo v logiki odprtih množic.

Če odprto množico \(U ⊆ X\) interpretiramo kot ``resnično na \(U\)'', potem je
resnica kar ``renično povsod'', oziroma \(X\). Neresnica bi potem lahko bila
katera koli množica, ki ni \(X\), ampak raje vzamemo za neresnico \emph{strožji}
pogoj, ki pravi ``resnično nikjer'', torej prazna množica. To nam tudi namigne,
da princip izključene tretje možnosti v tej logiki ne bo veljal.

Oglejmo si sedaj kako logične operacije delajo za pozitivnost realnih funkcij.
Situacija v splošnem bo potem popolnoma enaka, ampak je na tem primeru
geometrijska slika malo bolj jasna. Naj bosta \(f\) in \(g\) funkciji \(X → ℝ\)
in \(U ≔ ⟦f > 0⟧\), torej množica kjer je \(f\) pozitivna, in podobno \(V ≔ ⟦g > 0⟧\).

V tem kontekstu je potem \(f > 0 = ⊤\) ko je \(U = X\), oziroma, ko \(f\)
pozitivna povsod, in \(f > 0 = ⊥\), ko je \(U = ∅\), oziroma, ko \(f\) ni
pozitivna nikjer. Ubistvu si želimo, da \(f > 0 = ⊥\) velja natanko tedaj, ko
negacija neenakosti, torej \(f ≤ 0\), velja na celem prostoru. Zato torej tudi
vzamemo kot neresnico prazno množico, in ne poljubno množico različno od \(X\),
saj nam to da najbolj uporabno interpretacijo logičnih formul. Prav tako nam
omogoča, da ločimo med funkcijami, ki niso pozitivne, in med nepozitivnimi
funkcijami, kar je v analizi dokaj pomembna razlika.

Konjunkcijo \(U ∧ V\) potem beremo kot ``funkciji \(f\) in \(g\) sta obe
pozitivni'', kar je res natanko na preseku množic \(U\) in \(V\). Podobno je
disjunkcija \(U ∨ V\) natanko unija \(U\) in \(V\).
Za negacijo moramo malo razmisliti. Izraz \(f > 0\) lahko preprosto negiramo, in
dobimo pogoj \(f ≤ 0\), ampak množica \(x ∈ X\) za katere to drži tudi ni odprta
(in je natanko komplement \(U\), kar bi bil drugi kandidat za negacijo \(U\)).
Ampak lahko pa vzamemo njeno notranjost, torej ``največjo odprto množico, na
kateri \(f > 0\) ne velja''. Temu se potem reče tudi ``zunanjost množice
\(U\)'', označeno \(\ext{U}\), iz angleško ``\foreignlanguage{english}{exterior}''.

Implikcije med množicama v običajni matematiki ponavadi ne vidimo, tako da nam
tudi naša geometrijska slika ne bo veliko pomagala. Implikacija med množicama
\(A, B ⊆ X\) se definira dokaj intuitivno kot \(\set{x ∈ X}{x ∈ A ⇒ x ∈ B}\).
V klasični metateoriji je potem ta množica kar enaka \(B ∪ Aᶜ\). Res,
implikacija zgoraj je natanko \(x ∈ B ∨ x ∉ A\), oziroma \(x ∈ B ∪ Aᶜ\). Ampak
ta množica za \(U\) in \(V\) ni nujno odprta, tako da moramo spet vzeti njeno
notranjost, torej \(U ⇒ V\) je \(\int{\p{V ∪ Uᶜ}}\).
Implikacijo bi lahko tudi definirali drugače, saj se izkaže, da je natanko
karakterizirana z naslednjo lemo.
\begin{lema}
  Za vsak \(W ∈ 𝒪X\) je \(W ⊆ U ⇒ V\) natanko tedaj, ko je \(W ∩ U ⊆ V\).
\end{lema}
\begin{proof}
  Najprej preoblikujmo desno vsebovanost, saj lahko rečemo da že na nivoju
  množic, velja, da je \(W ∩ U ⊆ V\) natanko tedaj, ko je \(W ⊆ V ∪ Uᶜ\).
  Potem je pa po definiciji \(U ⇒ V\) največja odprta podmnožica \(V ∪ Uᶜ\),
  tako da bo gornja ekvivalenca očitno veljala, v eno smer ker je
  \(U ⇒ V ⊆ V ∪ Uᶜ\), v drugo smer pa ker je to največja taka množica.
\end{proof}

V klasični matematiki se pogosto reče, da je implikacija \(U ⇒ V\) kar
definirana kot \(V ∨ ¬U\), torej \(V ∪ \int{\p{Uᶜ}}\), ampak to v tem primeru ne
drži, kar vemo tudi iz konstruktivne matematike. Res, pokažemo lahko, da če
velja \(U ⇒ V = V ∨ ¬U\), velja princip izključene tretje možnosti. Očitno si za
implikacijo želimo, da velja \(U ⇒ U\) za vse \(U\). Ampak če velja gornja
enakost, bi to pomenilo, da velja \(U ∨ ¬U\) za vse \(U\), kar je pa natanko
princip izključene tretje možnosti. Naj bo recimo \(X\) prostor Sierpinskijeva,
torej prostor z dvema točkama \(0\) in \(1\), kjer je zgolj točka \(1\) odprta.
Potem je pa negacija \(U ≔ \{1\}\) prazna množica, in je \(U ∨ ¬U = U ≠ X\).
Logika tega prostora torej ni klasična, in tam gornja enakost ne velja.
Imamo torej sledeči slovar:
\begin{table}[h]
  \centering
  \begin{tabularx}{0.5\textwidth}{@{} *{2}{C} @{}}
    Logika    & Topologija\\
    %\midrule
    \(⊤\)     & \(X\)\\
    \(⊥\)     & \(∅\)\\
    \(U ∧ V\) & \(U ∩ V\)\\
    \(U ∨ V\) & \(U ∪ V\)\\
    \(¬U\)    & \(\ext{U}\)\\
    \(U ⇒ V\) & \(\int{\p{V ∪ Uᶜ}}\)
  \end{tabularx}
  
  \caption{Slovar za logiko odprtih množic}
  \label{tab:logic-opens-dict}
\end{table}

V nadaljevanju bomo raje pisali logične simbole, razen kjer govorimo konkretno o
operacijah na točkah prostora. Glavni razlog za to je, da se želimo zanašati na
intuicijo iz logike, kar bo pomagalo pri razumevanju motivacije večine
definicij. Imamo pa še skrivni razlog za to, ki ga bomo razkrili kasneje.
To tudi pomeni, da bomo namesto \(⊆\) pisali \(≤\).

\begin{opomba}
  Ker je \(W∧U ≤ V\) natanko tedaj ko \(W ≤ U⇒V\), je \(U ≤ V\) natanko tedaj,
  ko velja \(⊤ = U⇒V\), torej ko je \(U⇒V\) \quot{res}. To pa pomeni, da na
  \(U ≤ V\) lahko gledamo kot \quot{iz \(U\) sledi \(V\)}.
\end{opomba}

S tem smo vsakemu prostoru priredili propozicijsko logiko, sedaj bi pa želeli
to logiko obogatiti do logike prvega (in nato višjega) reda.
Do neke mere lahko tudi povemo, kaj so kvantifikatorji v tej logiki, le da lahko
kvantificiramo zgolj po resničnostnih vrednostih.
Naj bo \(P\) predikat na \(𝒪X\). Izkaže se, da lahko te interpretiramo kot
funkcije tipa \(𝒪X → 𝒪X\).
Najprej, če želimo najti, na kateri množici je \(P\) res za vse \(U ∈ 𝒪X\),
moramo najti največjo odprto množico, ki je vsebovana v vsakem \(P(U)\), kar je
natanko notranjost preseka teh množic.
Obstoj je malo bolj kompliciran. Eventuelno bomo želeli, da velja na primer
\(U₀ ∨ U₁ = \exist{i∈2}{Uᵢ}\), kakor tudi velja v navadni logiki.
Ampak denimo, da je \(X = ℝ\), \(U₀ = \p{-∞, 1}\), in \(U₁ = \p{0, ∞}\).
Potem je \(U₀ ∨ U₁ = ℝ\), ampak ne obstaja noben \(i\), da bi bil \(Uᵢ = ℝ\).
Rešitev na to dilemo je, da je prava interpretacija obstoja kar unija vrednosti
\(Uᵢ\) pri vseh možnih vrednostih \(i\).

\begin{align*}
  \for{p : Ω}{P(p)}   &≔ \int{\parens[\bigg]{⋂_{U ∈ 𝒪X}P(U)}}\\
  \exist{p : Ω}{P(p)} &≔ ⋃_{U ∈ 𝒪X}P(U)
\end{align*}
% Zares bi lahko rekli tudi malo več. Če je \(A\) poljubna množica in \(P\)
% podobno kot zgoraj tipa \(A → 𝒪X\), lahko definiramo \(\for{a : \c A}{P(a)}\)
% kot \(\int{\p{⋂_{a ∈ A}P(a)}}\). Tu v bistvu množico \(A\) v našo logiko vložimo
% kot diskreten prostor (označen \(\c A\)), kar dela dobro za na primer množico
% naravnih števil, se pa izkaže, da za recimo realna števila ne deluje. Res,
% realna števila (v večini logik) ne bodo diskreten prostor! Si bomo pa vseeno
% podrobneje pogledali kdaj točno so, saj se izkaže, da ima to zanimive posledice.

Na tej točki smo že definirali dovolj logike, da karakteriziramo dva znana
principa: princip izključene tretje možnosti in DeMorganov zakon.

\begin{definicija}
  Prostor je \emph{particijski}, ko ima bazo topologije, ki je particija, oziroma ko
  je vsaka odprta množica zaprta.
\end{definicija}
\begin{trditev}\label{th:lem-is-partition}
  Nad topološkim prostorom velja princip izključene tretje možnosti natanko
  tedaj, ko je prostor particijski.
\end{trditev}
\begin{proof}
  Princip izključene tretje možnosti pravi, da velja formula
  \(\for{p : Ω}{p ∨ ¬p}\). Če to interpretiramo v logiki odprtih množic, dobimo
  pogoj, da mora za vsako odprto množico veljati, da je
  \(X = U ∨ ¬U = U ∪ \int{\p{Uᶜ}}\).

  Ampak opazimo, da bo \(U ∪ A\) enako celemu prostoru, mora biti \(A\) nujno
  enak komplementu \(U\). Tedaj pa mora veljati, da je \(Uᶜ = \int{\p{Uᶜ}}\),
  torej da je množica \(Uᶜ\) odprta, kar je pa natanko tedaj, ko je množica
  \(U\) zaprta.
\end{proof}

\begin{definicija}
  Prostor je \emph{ekstremalno nepovezan}, ko je zaprtje vsake odprte množice
  odprto.
\end{definicija}
\begin{trditev}\label{th:wlem-is-ext-disc}
  Nad topološkim prostorom velja DeMorganov zakon natanko tedaj, ko je prostor
  ekstremalno nepovezan.
\end{trditev}
\begin{proof}
  DeMorganov zakon je ekvivalenten trditvi \(\for{p : Ω}{¬p ∨ ¬¬p}\), kar pa
  prav tako kot v gornjem dokazu pravi, da so vse zunanjosti množic zaprte.
  To pa pomeni, da so njihovi komplementi, torej zaprtja množic odprta, kar je
  natanko kar smo želeli.
\end{proof}


\subsection{Heytingovo-vrednotene množice}\label{sec:modeli-heyting}

Oglejmo si spet primer naravnih števil nad nekim prostorom \(X\). To bodo zvezne
preslikave iz odprtih podmnožic \(X\) v \(ℕ\).
Najprej, lahko vsaki taki preslikavi dodelimo ``resničnostno vrednost obstoja'',
oziroma \emph{razpon}, ki bo kar njena domena. To označimo z \(‖-‖\). Če je
\(n : U → ℕ\), potem \(n\) obstaja zgolj na \(U\), saj izven \(U\) nima
vrednosti. Različni taki naravni števili lahko tudi primerjamo, tako da
preprosto pogledamo množico, na kateri sta enaki:
\(⟦n = m⟧ = \set{t ∈ X}{n(t) = m(t)}\),
kjer seveda pazimo, da \(t\) jemljemo zgolj iz razpona obeh števil.
Načeloma bi morali vzeti notranjost te množice, saj morajo biti resničnostne
vrednosti odprte, ampak v tem primeru, ker so funkcije lokalno konstantne, bo ta
množica odprta. Potem pa se izkaže, da velja enakost \(⟦n = n⟧ = \dom(n)\),
tako da če znamo primerjati vsa števila, lahko izpeljemo tudi razpon, kar bomo
tudi vzeli kot osnovni gradnik naših objektov.

Označimo z \(ℒ\) topologijo prostora \(X\).
\begin{definicija}
  TODO: a naj bo ime \(ℒ\)-množice, ali dam kaj drugega? \(X\)-množice nočem
  zares, \(𝒪X\)-množice je malo nereodno, še posebej če nikjer nimam nobene
  točke in sight.

  \emph{\(ℒ\)-vrednotena množica} oziroma \emph{\(ℒ\)-množica} je množica \(A\),
  skupaj s preslikavo, ki jo pišemo \(⟦- = -⟧ : A×A → ℒ\), tako da velja
  \begin{align*}
    ⟦ a = b ⟧ ≤ ⟦ b = a ⟧\\
    ⟦ a = b ⟧ ∧ ⟦ b = c ⟧ ≤ ⟦ a = c ⟧
  \end{align*}
  Če iz konteksta ni razvidno kateri množici pripada preslikava \(⟦- = -⟧\),
  jo pišemo z indeksom \(⟦- =_A -⟧\).

  Kot zgoraj naj bo \(‖a‖ ≔ ⟦a = a⟧\) \emph{razpon \(a\)}.
\end{definicija}

Če \(≤\) beremo kot logično implikacijo, zgornja aksioma zgledata zelo podobno
aksiomoma simetričnosti in tranzitivnosti relacije \(=\), tako da bi lahko
rekli, da so \(ℒ\)-množice natanko množice opremljene z (interno) delno
ekvivalenčno relacijo.

\begin{primer}
  Na \(\set{f : U → ℕ}{U ∈ ℒ}\) lahko definiramo enakost
  \[ ⟦n = m⟧ = \set{t ∈ X}{n(t) = m(t)}\text. \]
  To je \(ℒ\)-množica, ki jo bomo označili z \(𝒩\).
\end{primer}

\begin{primer}\label{ex:reals}
  Na \(\set{f : U → ℝ}{U ∈ ℒ\text{, \(f\) zvezna}}\) lahko definiramo enakost
  \[ ⟦f = g⟧ = \int{\p{\set{t ∈ X}{f(t) = g(t)}}}\text. \]
  To je \(ℒ\)-množica, ki jo bomo označili z \(ℛ\).
  %, oziroma z \(ℝ_d\), saj se
  %izkaže, da je to objekt dedekindovih realnih števil v internem svetu.
\end{primer}

Je pa ta struktura bistveno bolj splošna kot ``množica preslikav z enakostjo po
točkah''.

\begin{konstrukcija}
  Množica \(∅\) je \(ℒ\)-množica.
  Množica \(\{*\}\) z enakostjo \(\i{*,*} = X\) je \(ℒ\)-množica, ki jo označimo
  \(\mb 1\). Pravimo jima \emph{prazna \(ℒ\)-množica} in \emph{\(ℒ\)-množica z
    enim elementom}.
\end{konstrukcija}
\begin{dokaz}
  Očitno je enakost na \(\{*\}\) simetrična in tranzitivna. Prav tako ima
  množica \(∅\) zgolj eno možno enakost, ki na prazno zadošča pogojema.
\end{dokaz}

\begin{primer}
  Množica \(ℕ\) skupaj z enakostjo definirano kot
  \[ ⟦n = m⟧ ≔
    \begin{cases}
      X &; n = m\\
      ∅ &; n ≠ m
    \end{cases}
  \]
  je \(ℒ\)-množica. To bomo označevali z \(\c ℕ\).
\end{primer}
To je instanca bolj splošne konstrukcije \emph{konstantnih \(ℒ\)-množic}.
\begin{konstrukcija}\label{def:constant-hvs}
  Naj bo \(A\) množica in enakost na njej definirana kot zgoraj, torej
  \(\i{a = b} ≔ ⋃\set{X}{a = b}\). To je \(ℒ\)-množica, ki jo označimo \(\c A\).
\end{konstrukcija}
\begin{dokaz}
  Množica \(\i{a = b}\) bo \(X\) natanko tedaj, ko je \(\i{b = a} = X\), tako da
  je enakost simetrična.

  Če je \(\i{a = b} ∧ \i{b = c} = X\), vemo, da je \(a = b = c\), torej je
  \(\i{a = c} = X\). Če pa je ta presek prazen, bo pa gotovo manjši od česarkoli
  na desni strani.
\end{dokaz}

V tem primeru elementi množice očitno niso zvezne funkcije iz prostora.
To je zato, ker imajo zvezne funkcije še dve pomembni lastnosti, ki jih v
strukturi sami ne zajamemo.
Prvič, funkcije lahko zožamo. To preprosto pomeni, da če vrednost obstaja na
neki odprti množici, potem obstaja tudi na vsaki manjši odprti množici.
Drugič, če imamo družino zveznih funkcij, ki se paroma ujemajo na presekih
njihovih domen, jih lahko enolično zlepimo v zvezno funkcijo, definirano na
uniji njihovih domen. V primeru funkcij v naravna števila je ta lastnost zelo
zanimiva, saj je vsaka lokalno konstantna funkcija tak zlepek konstantnih
funkcij. Potem pa če to združimo še z zožitvami, lahko rečemo, da je vsaka
funkcija \(U → ℕ\) zlepek zožitev konstantnih funkcij \(X → ℕ\).
Tako lahko na nek način rečemo, da so zvezne funkcije v naravna števila
``generirane'' z množico naravnih števil samo.
To pa zares pomeni, da je \(𝒩\) nekakšna \emph{napolnitev} \(ℒ\)-množice \(\c ℕ\).

Torej ne bomo zahtevali, da so naši objekti zaprti za zožitve in lepljenje, saj
jih lahko vedno napolnimo. Izkaže pa se, da nam to ustvari nekaj težav pri
definiciji funkcij. Želeli bi recimo, da je operacija zožitve preslikava, ampak
če \(ℒ\)-množice niso zaprte za zožitve, slike elementov preprosto ne nujno
obstajajo.

\begin{primer}
  Na primer, naj bo \(\p{2, 𝒫2}\) diskreten prostor na dveh točkah.
  \(𝒫2\)-množica \(A\) naj ima en element \(a\) definiran povsod,
  \(B\) pa dva elementa, \(b₀\) in \(b₁\), definirana v vsaki od točk prostora.
  Sedaj pa želimo definirati preslikavo, ki \(a\) slika v \(b₀\) na točki \(0\)
  in \(b₁\) na točki ena, pa naletimo natežavo, ker take funkcije ne moramo
  izraziti kot dejanska funkcija \(A → B\).
  Lahko pa definiramo relacijo, za katero za \(i ∈ 2\) velja \(R(a, bᵢ) ⇔ \{i\}\).
  Ta relacija je funkcijska, saj je \(2 = \{0\}∪\{1\} = R(a, b₀) ∨ R(a, b₁)\) in
  \(R(a, b) ∧ R(a, b') = ⟦b = b'⟧\).
\end{primer}

To nam da idejo, da lahko preslikave definiramo kot funkcijske relacije, seveda
spet vrednostene v logiki odprtih množic.

Definirajmo najprej, kaj pomeni, da je neka presliakva relacija med
\(ℒ\)-množicami. Prav tako definirajmo kaj pomeni, da je operacija. Te porodijo
poseben primer morfizmov, ki pa dejansko so funkcije med \(ℒ\)-množicami.
\begin{definicija}
  Preslikava \(R : A₁×…×Aₙ → ℒ\) je \emph{(interna) relacija}, ko velja
  \begin{align*}
    \i{a₁ = a₁'} ∧ … ∧ \i{aₙ = aₙ'} ∧ R(a₁,…,aₙ) ≤ R(a₁',…,aₙ')\text{ in}\\
    R(a₁,…,aₙ) ≤ \e{a₁}∧…∧\e{aₙ}\text.
  \end{align*}

  Preslikava \(f : A₁×…×Aₙ → B\) je \emph{(interna) operacija}, ko velja
  \begin{align*}
    \i{a₁ = a₁'} ∧ … ∧ \i{aₙ = aₙ'} ≤ f(a₁,…,aₙ) = f(a₁',…,aₙ')\text{ in}\\
    f(a₁,…,aₙ) ≤ \e{a₁}∧…∧\e{aₙ}\text.
  \end{align*}
\end{definicija}

\begin{definicija}
  \emph{Morfizem med \(ℒ\)-množicama} \(A\) in \(B\) je relacija
  \(⟦- \sim f(-)⟧ : B×A → ℒ\), za katero velja
  \begin{align}
    &⟦b \sim f(a)⟧ ∧ ⟦b' \sim f(a)⟧ ≤ ⟦b =_B b'⟧ \tag{enoličnost}\label{enoličnost}\\
    &‖a‖ ≤ ⋁_{b ∈ B} ⟦b \sim f(a)⟧               \tag{celovitost}\label{celovitost}
  \end{align}
  Na prvi dve pravili gledamo kot na skladnost z enakostima na \(A\) in \(B\),
  na drugi dve sta pa enoličnost in celovitost, zato morfizme vseeno pišemo v
  funkcijskem zapisu kot \(f : A ↬ B\).
\end{definicija}
\begin{opomba}
  Na relacijo \(b \sim f(a)\) zares želimo gledati kot enaksot, ampak ne nujno
  obstaja element \(ℒ\)-množice \(B\), ki bi predstavljal sliko \(f(a)\), moramo
  biti pri tem previdni.
  Bomo pa kasneje vseeno videli, da lahko pod določenimi pogoji na \(f(a)\)
  gledamo kot na element \(ℒ\)-množice \(B\).
\end{opomba}
Vseeno pa bomo internem jeziku na \(⋁_{b ∈ B} φ(b)\) gledali kot eksistenčni
kvantifikator, torej \ref{celovitost} res pravi, da obstaja nek \(b\), ki je slika
elementa \(a\).


\subsubsection{Interni jezik}

Oglejmo si ta interni jezik bolj natančno. Uvedimo končno oznako za
interpretacijo logičnih formul kot odprte množice, t.~j.~za formulo \(φ\)
označimo njeno interpretacijo kot \(⟦φ⟧\). Ta je namerno enaka gornjima dvema,
saj bomo videli, da sta zares to sestavna dela interpretacije v splošnem.
Spomnimo se sedaj tabele za logiko odprtih množic, z novim zapisom:
\begin{center}
  \begin{tabularx}{0.6\textwidth}{p{0.2\textwidth} X}
    \(⟦⊤⟧\)     & \(≔ X\)\\
    \(⟦⊥⟧\)     & \(≔ ∅\)\\
    \(⟦U ∧ V⟧\) & \(≔ U ∩ V\)\\
    \(⟦U ∨ V⟧\) & \(≔ U ∪ V\)\\
    \(⟦¬U⟧\)    & \(≔ \ext{U}\)\\
    \(⟦U ⇒ V⟧\) & \(≔ \int{\p{V ∪ Uᶜ}}\)
  \end{tabularx}
\end{center}
Torej, vse je enako kot prej, ampak sedaj lahko našemu jeziku dodamo še
\(ℒ\)-množice. Najprej, interpretirajmo terme jezika, torej elemente
\(ℒ\)-množic.

V našem jeziku želimo graditi elemente \(ℒ\)-množic. Najosnovnejši način je, da
vzamemo kar dobesedne elemente \(ℒ\)-množice \(A\). Poleg tega pa če imamo
operacijo tipa \(A → B\), jo lahko uporabimo na nekem obstoječem termu tipa
\(A\), da dobimo term tipa \(B\). Poleg tega pa se v izrazih lahko pojavljajo
spremenljivke, recimo v kvantificiranih izrazih. Te interpretiramo kot
spremenljivke v zunanjem svetu. Ker je naš jezik zelo osnoven, bo to vse, bomo
pa kasneje uvedli polnomočen \(λ\) račun, kar nam bo olajšalo delo z jezikom,
ampak ni nujno.

\begin{table}[h]
  \centering
  \begin{tabularx}{0.7\textwidth}{p{0.2\textwidth}|X}
    Termi tipa \(A\) & \(ℒ\)-množica \(A\)\\
    \hline
    \(a\)            & \(a\), za \(a ∈ A\)\\
    \(x\)            & \(x\), kjer je \(x\) spremenljivka tipa \(A\)\\
    \(f(α)\)         & \(f{\p{\i β}}\), kjer je \(f : B → A\) operacija in
                       \(β : B\)
  \end{tabularx}

  \caption{Interpretacija termov v internem jeziku}
  \label{tab:int-term}
\end{table}

Ko bomo kasneje pisali matematiko v internem jeziku, bomo uporabljali zapis
\(τ : A\) namesto (do sklanjanja in besednega reda natančno) \quot{\(τ\) tipa \(A\)}.
Na primer \quot{Naj bo \(x : A\)} se naj bere kot
\quot{Naj bo \(x\) tipa \(A\)}.

\begin{table}[h]
  \centering
  \begin{tabularx}{0.7\textwidth}{p{0.2\textwidth}|C}
    Interna logika          & Topologija\\
    \hline
    \(⊤\)                   & \(X\)\\
    \(⊥\)                   & \(∅\)\\
    \(φ ∧ ψ\)               & \(\i φ ∩ \i ψ\)\\
    \(φ ∨ ψ\)               & \(\i φ ∪ \i ψ\)\\
    \(¬φ\)                  & \(\ext{\i φ}\)\\
    \(φ ⇒ ψ\)               & \(\int{\p{\i ψ ∪ {\i φ}ᶜ}}\)\\
    \(\for{a : A}{φ(a)}\)   & \(\int{\p{⋂_{a ∈ A}\i{\e a ⇒ φ(a)}}}\)\\
    \(\exist{a : A}{φ(a)}\) & \(⋃_{a ∈ A}\i{\e a ∧ φ(a)}\)\\
    \(τ = σ\)               & \(\i{\i τ = \i σ}\)\\
    %\(\i{\e τ}\)                & \(≔ \e{\i τ}\)\\
    %\(\i{τ \sim f(σ)}\)         & \(≔ \i{\i τ \sim f(\i σ)}\)\\
    \(R(τ)\)                & \(R{\p{\i τ}}\), kjer je \(R : A → ℒ\) relacija
  \end{tabularx}

  \caption{Interpretacija formul v internem jeziku}
  \label{tab:int-sent}
\end{table}
\begin{opomba}
  Vsi \(ℒ\)-morfizmi so relacije, in jih v interni jezik dodamo kot relacijske
  simbole. Prav tako je \(\e -\) relacija, saj velja
  \(\i{a = a'}∧\e{a'} ≤ \e a\) in \(\e a ≤ \e a\), tako da tudi to dodamo kot
  relacijski simbol.
\end{opomba}
\begin{opomba}    
  Vredno je tudi omeniti, da so \(ℒ\)-enakosti tudi relacije, in da je njihova
  interpretacija kot enakost in kot relacija enaka.
\end{opomba}

\begin{definicija}\label{def:valid}
  Formula \(φ\) brez prostih spremenljivk je \emph{veljavna na \(U\)} (pišemo
  \(U ⊩ φ\)), ko je \(\i φ ≥ U\).

  Formula \(φ\) je \emph{veljavna} ko je veljavna na \(X\), in to bomo pisali
  tudi kot \(⊢ φ\).
\end{definicija}

\begin{trditev}\label{th:valid-res}
  Veljavnost lakho zožimo, torej če velja \(U ⊩ φ\) in je \(V ⊆ U\), velja tudi
  \(V ⊩ φ\).
\end{trditev}
\begin{proof}
  Po definiciji \(V ⊆ U ⊆ \i φ\).
\end{proof}

\begin{trditev}\label{th:valid-glue}
  Veljavnost lahko lepimo, torej če je \(C\) pokritje \(U\), in za vsak
  \(V ∈ C\) velja \(V ⊩ φ\), velja tudi \(U ⊩ φ\).
\end{trditev}
\begin{proof}
  Če za vsak \(V ∈ C\) velja \(V ⊆ \i φ\), bo \(\i φ\) večji tudi od njihove
  unije, kar je pa natanko \(U\).
\end{proof}
To nam da zanimivo posledico, da je veljavnost ekvivalentna lokalni veljavnosti.
\begin{definicija}
  Predikat \(P\) na odprtih množicah je na \(U\) \emph{lokalno ali sčasoma res}
  (pišemo \(\eventually{V ⊆ U}{P(V)}\)), ko obstaja pokritje \(C\) množice
  \(U\), tako da za vsak element pokritja velja \(P(V)\).
\end{definicija}
\begin{posledica}\label{th:valid-local}
  \(U ⊩ φ\) natanko tedaj ko \(\eventually{V ⊆ U}{V ⊩ φ}\).
\end{posledica}

\begin{trditev}
  Veljavnost formule se lahko računa po spodnji tabeli.
  \begin{table}[h]
    \centering
    \begin{tabularx}{0.9\textwidth}{p{0.25\textwidth}X}
      \(U ⊩ ⊤\)                   & vedno\\
      \(U ⊩ ⊥\)                   & ko je \(U = ∅\)\\
      \(U ⊩ φ ∧ ψ\)               & ko \(U ⊩ φ\) in \(U ⊩ ψ\)\\
      \(U ⊩ φ ∨ ψ\)               & ko
                                    \(\eventually{V ⊆ U}{V ⊩ φ\text{ ali }V ⊩ ψ}\)\\ 
      \(U ⊩ φ ⇒ ψ\)               & ko velja \(U∩\i φ ≤ \i ψ\), ali\\
                                  & ko za vsak \(V ⊆ U\) velja, da iz \(V ⊩ φ\)
                                    sledi \(V ⊩ ψ\)\\
      \(U ⊩ ¬φ\)                  & ko za vsak \(V ⊆ U\) velja, da iz \(V ⊩ φ\)
                                    sledi \(V = ∅\)\\
      \(U ⊩ \for{a : A}{φ(a)}\)   & ko za vsak \(a ∈ A\) velja \(U ∩ \e a ⊩ φ(a)\)\\
      \(U ⊩ \exist{a : A}{φ(a)}\) & ko
                                    \(\eventually{V ⊆ U}{\exist{a ∈ A}{V ⊆ \e a
                                    \text{ in } V ⊩ φ(a) }}\)
    \end{tabularx}

    \caption{Veljavnost formul oziroma Kripke-Joyalova semantika}
    \label{tab:kj-sem}
  \end{table}
\end{trditev}
\begin{proof}
  Večina točk zgoraj je očitna, tako da se osredotočimo zgolj na disjunkcijo in
  obstoj.
  
  Pri disjunkciji po definiciji \(U ⊩ φ ∨ ψ\) velja, ko je \(U ≤ \i φ ∪ \i ψ\), torej, ko
  \(\i φ\) in \(\i ψ\) pokrivata prostor. Ampak, očitno velja \(\i φ ⊩ φ\) in
  \(\i ψ ⊩ ψ\), torej obstaja želeno pokritje.
  Obratno pa, če vzamemo vse elemente pokritja, na katerih velja \(φ\), bo \(φ\)
  veljal tudi na njihovi uniji, tako da če tako pokritje obstaja, bi ga vedno lahko
  zamenjali s pokritjem \(\{\i φ, \i ψ\}\).

  Situacija z obstojem je popolnoma analogna, saj pogoj na desni pravi natanko,
  da množice \(\i{\e a ∧ φ(a)}\) pokrivajo \(U\).
\end{proof}
\begin{opomba}
  Pri implikaciji imamo dva načina, kako jo dokazati. Izkaže se, da je v
  različnih primerih lažje uporabiti različne načine. Ponavadi, če sta izraza
  \(φ\) in \(ψ\) dokaj preprosta, bo prvi način boljši, ampak če prevajamo kak
  zahtevnejši izraz, je pa bolj praktično interpretirati implikacijo kot kar
  implikacijo, in kasneje stvari poenostaviti.
\end{opomba}

Kdaj bomo pa tudi želeli pisati formule s prostimi spremenljivkami, recimo
zgoraj v definicijah \(ℒ\)-množic in morfizmov. V teh primerih vedno želimo, da
je formula veljavna na vseh možnih vrednostih teh spremenljivk, tako da bomo
veljavnost teh formul tako tudi definirali.
\begin{definicija}
  Formula \(φ\) s prostimi spremenljivkami tipov \(A₁,…,Aₙ\) je
  \emph{(lokalno) veljavna na \(U\)} (pišemo \(U ⊩ φ\)), ko je za vse
  \(aᵢ ∈ Aᵢ\) formula \(φ(a₁,…,aₙ)\) veljavna na \(U\).
  Če želimo izraziti, da je formula veljavna na celem \(X\), bomo kot zgoraj
  pisali tudi \(⊢ φ\), oziroma če želimo izpostaviti katerega tipa so
  spremenljivke kot \({x₁ : A₁,…,xₙ : Aₙ ⊢ φ}\).
\end{definicija}

TODO: numbering
Ponovimo sedaj gornje definicije v internem jeziku.
\begin{definicija}
  \emph{\(ℒ\)-množica} je množica \(A\) z interno relacijo \(=\), tako da velja
  \begin{align*}
    &⊢ a = b ⇒ b = a\\
    &⊢ a = b ∧ b = c ⇒ a = c
  \end{align*}
\end{definicija}
\begin{definicija}
  \emph{Morfizem med \(ℒ\)-množicama} \(A\) in \(B\) je interna relacija, ki jo
  pišemo \(b \sim f(a)\), za \(a\) tipa \(A\) in \(b\) tipa \(B\), za katero velja
  \begin{align}
    &⊢ b \sim f(a) ∧ b' \sim f(a) ⇒ b = b'     \tag{enoličnost}\label{enoličnost}\\
    &⊢ \for{a : A}{\exist{b : B}{b \sim f(a)}} \tag{celovitost}\label{celovitost}
  \end{align}
\end{definicija}


\subsubsection{Interne relacije}

Z internim jezikom si lahko pomagamo pri konstruiranju relacij oziroma
\(ℒ\)-morfizmov. Natančno to pomeni, da bomo formule s prostimi spremenljivkami
interpretirali kot preslikave, ki pa bodo avtomatsko zadoščale pravilom relacij.

Najprej si olajšajmo delo, in definirajmo produkte \(ℒ\)-množic. Potem bomo
lahko vse definirali za eno spremenljivko, saj lahko relacije na več
spremenljivkah predstavimo kot eniško relacijo (ozioma predikat) na produktu.

\begin{konstrukcija}\label{cons:prod}
  Naj bosta \(A\) in \(B\) \(ℒ\)-množici. Njun produkt je množica
  \[ \set{(a, b) ∈ A×B}{\e a = \e b}, \]
  enakost pa definiramo po točkah
  \[ \i{\p{a, b} = \p{a', b'}} ≔ \i{a = a'} ∧ \i{b = b'}\text. \]
\end{konstrukcija}
\begin{proof}
  Gornja enakost je očitno simetrična in tranzitivna, tako da tvori
  \(ℒ\)-množico.
\end{proof}
\begin{opomba}
  Zgoraj za nosilec produkta vzamemo pare, ki so enako definirani. To storimo
  zato, da bomo kasneje lahko definirali ustrezne projekcije iz produkta, saj
  sicer te nebi bili \(ℒ\)-morfizmi.
\end{opomba}

\begin{konstrukcija}\label{cons:rel-from-formula}
  Naj bo \(φ\) formula s prosto spremenljivko \(x\) tipa \(A\). Potem preslikava
  \(a ↦ \e a ∧ \i{φ(a)}\) definira interno relacijo na \(A\).
\end{konstrukcija}
\begin{dokaz}
  Označimo preslikavo s \(\hat φ\).
  Preslikava je očitno stroga. Prav tako je ekstenzionalna, saj velja
  \begin{align*}
    \i{a = a'} ∧ \hat φ(a')
    &≤ \i{a = a'} ∧ \e{a'} ∧ \i{φ(a')}\\
    &≤ \e a ∧ \i{a = a' ∧ φ(a')}\\
    &≤ \e a ∧ \i{φ(a)} = \hat φ(a)
  \end{align*}
\end{dokaz}
\begin{opomba}
  Če je formula \(φ\) že taka, da velja \(\i{φ(a)} ≤ \e a\) za vse \(a ∈ A\),
  lahko preprosto pišemo \(\hat φ(a) ≔ \i{φ(a)}\).
\end{opomba}

\begin{primer}
  Če je \(R\) relacija na \(A\), je \(\hat R = R\). Ker je \(R\) že sama po sebi
  stroga, lahko uporabimo gornjo opombo, in pišemo \(\hat R(a) = \i{R(a)}\).
  Ampak to je pa natanko \(R(a)\).
\end{primer}

TODO: nekje nek soundness
Pomembno je še dejstvo, da v interni logiki lahko logično sklepamo, kot smo
navajeni. Bolj natančno, če neka trditev velja \emph{konstruktivno}, bo veljala
tudi v naši interni logiki. Konstruktivnost je tu potrebna, saj kot smo povedali
zgoraj v splošnem izključene tretje možnosti nimamo.
\begin{izrek}
  Če je \(φ\) formula brez prostih spremenljivk, in je veljavna konstruktivno,
  je tudi veljavna v gornjem smislu.
\end{izrek}
Dokaz poteka po indukciji, in je relativno direkten, tako da se v detajle ne
bomo spuščali, lahko si pa ogledate TODO: cite neki kjer to nardijo

Lahko pa kot ilustracijo naredimo primera implikacije in disjunkcije.
Pri implikaciji predpostavimo \(φ ⇒ ψ\) konstruktivno. TODO: kako?

Pri disjunkciji pa dejansko dobimo nekaj več. Če je \(φ∨ψ\) konstruktivno res,
je res kar že en od disjunktov (recimo \(φ\)). Potem pa po indukciji velja
\(X ⊩ φ\), torej \(φ\) je res na celotnem \(X\), kar je močneje od
interpretacije \(φ∨ψ\) v naši logiki. To je posledica dejstva, da je
konstruktivna resnica močnejša od resnice v naših modelih, kajti topološki
modeli niso vsi možni modeli konstruktivne logike.

NOTE: Mogoče je to prezgodej, a so dokazi tle ok za to stopnjo?
\begin{konstrukcija}
  Če imamo \(ℒ\)-morfizma \(A \oset{f}{↬} B \oset{g}{↬} C\), je njun kompozitum
  \(g∘f : A ↬ C\) definiran kot
  \[ ⟦c \sim g∘f(a)⟧ ≔ ⋁_{b ∈ B} ⟦c \sim g(b)⟧∧⟦b \sim f(a)⟧\text. \]
  V internem jeziku je to natanko kompozitum relacij
  \(\exist{b : B}{c \sim g(b) ∧ b \sim f(a)}\).
\end{konstrukcija}
\begin{proof}[Konstruktiven]
  Vemo, da je kompozitum relacij relacija, in tudi kompozitum funkcijskih
  relacij bo funkcijska, tako da je ta kompozitum res morfizem.
\end{proof}

\begin{konstrukcija}
  Identiteta na \(A\) je kar \(⟦- =_A -⟧\).
\end{konstrukcija}
\begin{proof}[Konstruktiven]
  Interno je enakost na \(A\) identitetna relacija, tako da vemo, da je
  kompozitum z njo tudi identiteta.
\end{proof}

\begin{definicija}
  Kategorijo \(ℒ\)-množic z morfizmi in gornjim kompozitumom in identiteto
  označimo z \(\cat{Set}(ℒ)\).
\end{definicija}

Kot vemo, so podobjekti natanko (ekvivalenčni razredi) monomorfizmov
\begin{definicija}\label{def:subset}
  Eniškim relacijam na \(A\) pravimo \emph{\(ℒ\)-podmnožice \(A\)} in označimo
  \(S ⊑ A\). Za \(a ∈ A\) in \(S ⊑ A\) bomo namesto \(S(a)\) pisali \(a ∈ S\).
  Interni jezik razširimo z \(∈\) na očiten način.
  %z enakostjo definirano kot \(⊢ \for{a : A}{P(a) ⇔ Q(a)}\).
  % ekvivalenčnih razredov monomorfizmov
  % s kodomeno \(A\), kjer sta monomorfizma \(s : S ↬ A\) in \(t : T ↬ A\) v
  % relaciji natanko tedaj, ko obstaja izomorfizem \(i : S ↬ T\), da je
  % \(t ∘ i = s\). 
\end{definicija}

\begin{konstrukcija}\label{cons:ℒ-sub-lattice}
  TODO: a rečem mreža al delna ureditev?

  \(ℒ\)-podmnožice tvorijo mrežo z ureditvijo
  \[ S ⊑ T :⇔\ ⊢ \for{a : A}{a ∈ S ⇒ a ∈ T}\text. \]
\end{konstrukcija}

\begin{definicija}\label{notation:setbuilder}
  Naj bo \(φ\) formula s prosto spremenljivko \(x : A\). Potem predikat
  \[ {a ↦ \e a ∧ \i{φ(a)}} \]
  določa \(ℒ\)-podmnožico \(A\), ki jo označimo z \(\set{x : A}{φ}\).
\end{definicija}

\begin{definicija}\label{notation:image}
  Vsakemu \(ℒ\)-morfizmu \(f : A ↬ B\) in \(ℒ\)-podmnožicama \(S ⊑ A\), in \(T ⊑ B\) lahko priredimo
  \begin{enumerate}
  \item \(ℒ\)-podmnožico \(f[S] ⊑ B\), definirano kot
    \(\set{y : B}{\exist{a ∈ S}{y \sim f(a)}}\), imenovano \emph{slika} in
  \item \(ℒ\)-podmnožico \(f⁻¹[T] ⊑ A\), definirano kot
    \(\set{x : A}{\exist{b ∈ T}{b \sim f(x)}}\), imenovano \emph{praslika}.
  \end{enumerate}
\end{definicija}

\begin{primer}\label{cons:sing}\label{notation:sing-image}
  Za \(a ∈ A\) lahko tvorimo \(\s a ≔ \set{x : A}{x = a}\). Tej \(ℒ\)-podmnožici
  bomo pravili \emph{enojec}.

  Za enojce lahko poenostavimo zapis za sliko in prasliko,
  \[ f[a] ≔ f[\s a] = \set{y : B}{y \sim f(a)} \text{ in}\]
  \[ f⁻¹[b] ≔ f⁻¹[\s b] = \set{x : A}{b \sim f(x)} \text,\]
  kot smo vajeni.
\end{primer}

Iz vsake \(ℒ\)-podmnožice lahko tudi zgradimo dejansko \(ℒ\)-množico, ki se
vloži v svojo nadmnožico.
\begin{konstrukcija}\label{cons:ℒset-from-ℒsub}
  Naj bo \(P ⊑ A\). Tvorimo \(ℒ\)-množico \(\hat P\) z nosilcem \(A\) in enakostjo
  \(\i{a = a'} ≔ \i{a =_A a'}∧P(a)\). Ta se z identiteto vloži v \(A\).
\end{konstrukcija}
\begin{dokaz}
  Zaradi preglednosti posebej označimo le enakost na \(A\).

  Enakost na \(\hat P\) je simetrična, saj je \(P\) ekstenzionalen.
  Tranzitivnost je malo bolj zanimiva. Očitno iz \(\i{a = a'}∧\i{a' = a''}\)
  sledi \(\i{a=_A a''}∧P(a)∧P(a')\) in, ker smo imeli \(\i{a = a'}∧P(a')\),
  lahko prej tisti \(P(a')\) spremenimo v \(P(a)\), tako da sledi
  \(\i{a =_A a''}∧P(a)\).

  Poleg tega je identitetna relacija med \(\hat P\) in \(A\), torej preslikava
  \(\p{a, a'} ↦ \i{a =_A a'}\), monomorfizem. To sledi iz dejstva, da če je
  \(f : B ↬ \hat P\), je \(\i{a \sim \id∘f(b)} = \i{a \sim f(b)}\).
\end{dokaz}

TODO: standardno so podobjekti bla bla bla, to je isto, we good
\begin{trditev}\label{th:ℒsub-is-sub}
  Delni ureditvi \(ℒ\)-podmnožic \(A\) in podobjektov \(A\) sta si ekvivalentni.
\end{trditev}
\begin{proof}
  Naj bo \(m : S ↬ A\) monomorfizem \(ℒ\)-množic. Tej lahko priredimo sliko
  \(m[S]\). Ta prireditev ohranja neenakost, tako da je injektivna in dobro
  definirana na množici ekvivalenčnih razredov.

  Obratno, lahko vsaki \(ℒ\)-podmnožici \(P ⊑ A\) priredimo \(ℒ\)-množico
  \(\hat P\). Ta se v \(A\) slika z identiteto, ki je po gornjem monomorfizem.
  
  Preverimo, da sta si ti operaciji inverzni.
  Če začnemo z \(m : S ↬ A\), se \(m\) zoži na \(S ↬ A/m[S]\). Prav tako je ta
  preslikava surjektivna, saj za vsak \(a : A/m[S]\) vemo, da ima razpon
  \(\e a ∧ a ∈ m[S]\), torej obstaja nek \(s : S\), da je \(a \sim m(s)\).

  Obratno, če je \(P ⊑ A\) je \(a ∈ \id[\hat P]\) natanko tedaj, ko velja \(a ∈ P\).
\end{proof}

\begin{konstrukcija}\label{cons:quot}
  Naj bo \(R\) ekvivalenčna relacija na \(A×A\). Potem množica \(A\), kjer za
  enakost vzamemo \(R\), tvori \(ℒ\)-množico, ki ji pravimo
  \emph{kvocient \(A\) po \{R\}} in jo označimo \(\frac A R\).

  Identiteta na \(A\) potem definira kvocientno preslikavo \(q : A ↬ \frac A R\).
\end{konstrukcija}
\begin{dokaz}
  Enakost bo očitno simetrična in tranzitivna, tako da rabimo preveriti samo, da
  identiteta res definira ustrezno preslikavo.

  Najprej pokažimo, da velja \(⊢ a = a' ⇒ R(a, a')\). Ker je preslikava
  refleksivna, to pomeni, da velja \(⊢ \e a ⇒ R(a, a)\). Poleg tega pa, ker je
  relacija, imamo \(⊢ \p{a, a'} = \p{a', a'} ∧ R(a',a') ⇒ R(a,a')\).
  Leva stran implikacije se poenostavi na \(a = a'\), ker smo na \(\e{a'}\) in
  je \(R(a',a')\) res.

  Po definiciji je \(q{\p{a, a'}} = \i{a =_A a'}\). To pa pomeni, da je
  \(q(a, a')∧q(b, b') ⇒ a =_A a' ∧ b =_A b'\), kar pa implicira želeno nenakost.
  Celovitost pa preprosto sledi iz celovitosti identitete na \(A\), saj je ta
  kot preslikava manjša od naše kvocientne preslikave.
\end{dokaz}


\subsubsection{Polne \(ℒ\)-množice}

Prej smo že omenili, da lahko iz globalnih lokalnih elementov rekonstruiramo
snop, vendar je ta konstrukcija komplicirana, poleg tega pa potem delamo z
nekimi kvocienti, kar nikoli ni prijetno. Tako bi želeli, da bi naše
\(ℒ\)-množice kar dopolnili še z vsemi ostalimi elementi snopa. Vemo, da imamo
za to dovolj informacij, saj je vsak element zožitev enega od globalnih
lokalnih, je pa vseeno izziv kako identificirati zožitve, ki se ujemajo.

% TODO: reword
% Trik, ki ga bomo uporabili smo že srečali pri motivaciji za definicijo
% \(ℒ\)-preslikav, namreč, da lahko element snopa \(f\) primerjamo z vsemi
% globalnimi lokalnimi elementi, torej da dobimo funkcijo iz \(ℒ\)-množice v okvir
% \(ℒ\). Ta konstrukcija v snopih enolično določa elemente, torej če sta
% \(f ∈ F(U)\) in \(g ∈ F(V)\), in se njune primerjave ujemata na vseh globalnih
% lokalnih elementih, se v posebnem tudi ujemata z neko razširitvijo \(f\) (ki jo
% označimo \(f'\)), torej velja \(f{\res V} = f'{\res{U∩V}} = g{\res U}\), kar pa
% pomeni, da sta \(f\) in \(g\) skladna. Potem pa nam vsaka primerjava definira
% skladno družino, ki jo lahko zlepimo v enoličen element snopa.

% Spomnimo se pa, da so take funkcije natanko podobjekti, in če je element
% podobjekta enolično določen, mu lahko pravimo enojec, oziroma podenojec, ker ta
% element ne obstaja nujno med globalnimi lokalnimi elementi. Vendar pa kljub
% temu, da so te podenojci lahko \quot{prazni}, imajo dovolj zanimivo strukturo,
% da iz njih lahko rekonstruiramo celoten snop.

% % TODO: reword
% Naj bo \(F\) snop nad \(ℒ\). Potem lahko za \(m ∈ F(U)\) definiramo enojec
% \(⟦a ∈ ⟨m⟩⟧ ≔ ⟦a = m⟧\), kjer je \(a ∈ F(V), V ∈ ℒ\).
% Na enojcih lahko definiramo tudi \(⟦⟨m⟩ = ⟨n⟩⟧ ≔ ⟦m = n⟧\).
% Snop \(F\) lahko sedaj rekonstruiramo iz njegovih enojcev.
% Podobno bomo storili za \(ℒ\)-množice.

\begin{definicija}\label{def:sing}
  \emph{(Pod)enojec} na \(ℒ\)-množici \(A\) je \(ℒ\)-podmnožica \(σ ⊑ A\), za katero velja
  \[ ⊢ a ∈ σ ∧ b ∈ σ ⇒ a = b\text. \]
\end{definicija}
\begin{opomba}
  V literaturi se tem preslikavam reče kar enojci, saj enolično določajo
  delno definirane elemente, in se bomo tega držali tudi mi. Poleg tega se za
  enojce ponavadi uporablja grške črke \(σ, ρ, τ, \).
\end{opomba}
\begin{opomba}
  Če želimo dokazati, da je neka preslikava enojec, zadošča preveriti gornji
  pogoj ter drugi pogoj za \(ℒ\)-podmnožice, torej \(⊢ a = b ∧ b ∈ σ ⇒ a ∈ σ\),
  saj prvi pogoj sledi iz gornjega pogoja.
\end{opomba}

\begin{trditev}\label{th:sing-is-subsing}
  Za \(a ∈ A\) je enojec \(\s a\) res enojec v gornjem smislu.
\end{trditev}
\begin{dokaz}
  \(ℒ\)-podmnožica \(\s a\) je res enojec, saj če imamo \(x,y ∈ \s a\) je
  \(x = a\) in \(y = a\), torej je \(x = y\).
\end{dokaz}

\begin{konstrukcija}\label{cons:compl}
  Množica enojcev \(A\) z relacijo \(σ = τ ≔ \exist{x : A}{x ∈ σ ∧ x ∈ τ}\)
  tvori \(ℒ\)-množico \(\g A\).
\end{konstrukcija}
\begin{proof}
  Gornje očitno definira relacijo, saj je definirana v internem jeziku.
  Poleg tega je očitno simetrična, tako da si poglejmo le tranzitivnost.
  Naj bo \(σ = τ\) in \(τ = ρ\), torej obstajata \(x\) in \(y\), da velja
  \(x ∈ σ ∧ x ∈ τ\) in \(y ∈ τ ∧ y ∈ ρ\). Ker je \(τ\) enojec je \(x = y\),
  torej velja \(x ∈ σ\) in \(x ∈ ρ\), kar pa po definiciji pomeni \(σ = ρ\).
\end{proof}

\begin{lema}\label{lem:singunit}
  Za \(a,b ∈ A\) in \(σ ∈ \g A\) veljajo naslednje ekvivalence:
  \begin{enumerate}
  \item \(⊢ \s a = σ ⇔ a ∈ σ\)
  \item \(⊢ \s a = \s b ⇔ a = b\)
  \item \(⊢ a = b ⇔ \exist{σ : \g A}{a ∈ σ ∧ b ∈ σ}\)
  \end{enumerate}
\end{lema}
\begin{dokaz}
  \begin{enumerate}
  \item Če velja \(\s a = σ\), je potem \(a ∈ \s a = σ\). Obratno, če je
    \(a ∈ σ\) potem obstaja \(a' : A\) (namreč \(a\)), da je \(a = a'\) in
    \(a' ∈ σ\), torej je po definiciji \(\s a = σ\).
  \item Po prvi točki je \(\s a = \s b\) natanko \(a ∈ \s b\), torej \(a = b\).
  \item Če je \(a = b\) potem \(\s a\) očitno zadošča desni strani. Obratno, če
    za nek \(σ\) velja \(a ∈ σ ∧ b ∈ σ\), pa po definiciji enojca velja
    \(a = b\).\qedhere
  \end{enumerate}
\end{dokaz}

Utemeljimo rabo besede \quot{enojec}.
\begin{trditev}\label{th:subsing-is-sing}
  Za vsako \(ℒ\)-množico \(A\) velja
  \[ ⊢ \for{σ : \g A}{\exist{a : A}{a ∈ σ}}\text. \]
\end{trditev}
\begin{proof}
  Če razpišemo gornje dobimo \(\e σ ≤ \i{\exist{a : A}{a ∈ σ}}\). Ampak \(\e σ\)
  je pa natanko \(\exist{a : A}{a ∈ σ ∧ a ∈ σ}\), torej je neenakosti zadoščeno.
\end{proof}
\begin{posledica}
  Velja \(\for{σ : \g A}{\exist{a : A}{σ = \s a}}\), torej so interno vsi
  enojci oblike \(\s a\), za nek \(a\).
\end{posledica}
TODO: kasneje napiši, da zaradi tega dobimo izomorfizem, in da zato lahko
menjamo med \(A\) in \(\g A\).

% TODO: rewrite
% Kot smo rekli na začetku podrazdelka, nam vsak enojec na \(F'\) enolično določa
% element snopa \(F\). Prav tako pa enojci na \(F\) enolično določajo elemente
% \(F\). Če torej želimo dopolniti \(ℒ\)-množico do celega snopa, moramo vzeti
% njeno množico enojcev, oziroma bolj natančno, so polne \(ℒ\)-množice take, kjer
% nam enojci ne predstavljajo nobenih novih elementov. % nobenih drugih elementov
%                                 % kot elementov \(ℒ\)-množice same.

\begin{definicija}\label{def:compl}
  \(ℒ\)-množica \(A\) je \emph{polna}, kadar je preslikava množic \(a ↦ \s a\)
  bijekcija. Polno podkategorijo polnih \(ℒ\)-množic označimo s
  \(\cat{CSet}(ℒ)\).
\end{definicija}

\begin{lema}\label{th:compl-res}
  Polne \(ℒ\)-množice imajo operator zožitve, t.~j. za vsak \(a ∈ A\) in
  \(U ∈ ℒ\) obstaja \(a{\res U} ∈ A\), tako da velja \(⟦a{\res U} = b⟧ = ⟦a = b⟧∧U\).
  V posebnem torej tudi velja \(‖a{\res U}‖ = ‖a‖∧U\) in \(a{\res U\res V} = a{\res{U∧V}}\).
\end{lema}
\begin{dokaz}
  Tvorimo kar \(τ = \set{b : A}{a = b ∧ U}\). To je enojec, saj
  \[
    x∈τ ∧ y∈τ ⇔ a = x ∧ U ∧ a = y ∧ U ⇒ x = y\text.
  \]
  Ker je \(A\) polna, ta ustreza nekemu elementu \(\g A\), ki mu lahko rečemo
  \(m{\res U}\), zanj pa očitno velja željena enakost
  \begin{equation*}
    ⟦a{\res U} = b⟧ = ⟦τ = \s b⟧ = \i{b ∈ τ} = ⟦a = b⟧∧U\text. \qedhere
  \end{equation*}
\end{dokaz}
\begin{posledica}
  Za \(a ∈ A\) in \(U ∈ ℒ\) velja \(\i{b ∈ {\s a}{\res U}} = \i{b ∈ \s a}∧U\).
\end{posledica}
\begin{posledica}
  Za \(σ ∈ \g A\) in \(U ∈ ℒ\) velja \({\s σ}{\res U} = \s{σ{\res U}}\).
\end{posledica}

\begin{lema}\label{th:compl-glue}
  Polne \(ℒ\)-množice imajo lastnost lepljenja skladnih družin, t.~j. za vsako
  družino \(aᵢ ∈ A\), za katero velja \(Uᵢ∧Uⱼ ⊩ aᵢ = aⱼ\), kjer je \(Uᵢ ≔ ‖aᵢ‖\),
  obstaja enoličen tak \(a ∈ A\), da velja \(Uᵢ ⊩ a = aᵢ\).
  %\(mᵢ ∈ A\) za katero velja \(⟦mᵢ = mⱼ⟧ = ‖mᵢ‖∧‖mⱼ‖\) obstaja nek \(m ∈ A\),
  %tako da je \(⟦m = mᵢ⟧ = ‖mᵢ‖\) in \(‖m‖ = ⋁ᵢ‖mᵢ‖\).
\end{lema}
\begin{dokaz}
  Naj bodo \(aᵢ\) taki in tvorimo \(τ ≔ \set{a : A}{\exist{i : \c I}{a = aᵢ}}\).

  \(ℒ\)-podmnožica \(τ\) je enojec, saj če sta \(a,b ∈ τ\) je \(a = aᵢ\) in
  \(b = aⱼ\), za neka \(i,j ∈ I\). Potem smo pa na \(Uᵢ ∧ Uⱼ\), torej imamo
  \(aᵢ = aⱼ\). Sledi, da sta \(a\) in \(b\) enaka.

  Ker je enojec ustreza nekemu \(a : A\).
  Za ta \(a\) pa potem velja \(a = aᵢ ⇔ aⱼ = aᵢ\), kar je pa res.
  Prav tako, če je \(b\) neka druga amalgamacija družine, velja
  \(Uᵢ ⊩ b = aᵢ = a\).
\end{dokaz}

TODO: Insert examples


% NOTE: ⟨-⟩ definira idempotentno monado. To mi avtomatsko da naslednjih par
% rezultatov (specifično do izreka da so polne ℒ-množice refleksivna
% podkategorija).
\begin{lema}\label{th:compl-is-compl}
  \(ℒ\)-množica \(\g A\) je polna.
\end{lema}
\begin{dokaz}
  Pokazati moramo, da je preslikava \(σ ↦ \s σ\) bijekcija.
  Injektivnost sledi neposredno iz druge točke gornje leme.
  % NOTE: to je inverz enote (in je množenje).
  Naj bo potem \(Σ ∈ \g{\g A}\). Definirajmo \(τ ≔ \set{a : A}{\s a ∈ Σ}\).
  To je enojec, saj velja
  \[
    a∈τ ∧ b∈τ ⇔ \s a ∈ Σ ∧ \s b ∈ Σ ⇒ \s a = \s b ⇔ a = b\text.
  \]

  Pokažimo še, da je \(Σ = \s τ\).
  Pokažimo, da je \(τ ∈ Σ\). Obstaja nek \(a : A\), da je \(a ∈ τ\), torej
  \(\s a = τ\). Potem je pa \(\s a ∈ Σ\), torej je \(Σ\) res enak \(\s τ\).
  
  Sledi, da za vsak enojec v \(\g{\g A}\) obstaja natanko en enojec v \(\g A\),
  ki se vanj slika, tako da je preslikava \(\g -\) res bijekcija, in je \(\g A\)
  polna.
\end{dokaz}
\begin{opomba}
  Gornji izek nam torej pove, da lahko \(\g A\) pravimo
  \emph{napolnitev \(ℒ\)-množice A}.
\end{opomba}

\begin{izrek}\label{th:sigmaiso}
  \(ℒ\)-množica \(\g A\) je izomorfna \(A\).
\end{izrek}
\begin{dokaz}
  % NOTE: η je enota monade σ, če je g njen inverz, kaj je njena povezava z
  % množenjem? Plus lahko spustimo pol dokazov, da je η morfizem.
  Definirajmo preslikavo \(⟦σ \sim η(a)⟧ ≔ \i{a ∈ σ}\).
  Očitno je skladna z relacijama, tako da moramo preveriti zgolj
  enoličnost in celovitost.
  Enoličnost sledi iz implikacije \(a∈σ ∧ a∈τ ⇒ σ = τ\), ostanea le celovitost.
  Naj bo \(a : A\). Potem velja \(a ∈ \s a\), torej \(\s a \sim η(a)\).
  
  Preveriti moramo torej le še, da je bijekcija. Injektivna je očitno, saj to
  sledi iz definicije enojca, surjektivnost pa sledi iz
  \(⟦\s a \sim η(a)⟧ = \i{a ∈ \s a} = ‖a‖\).
\end{dokaz}
\begin{posledica}\label{th:set-eq-cset}
  Kategorija \(ℒ\)-množic je ekvivalentna kategoriji polnih \(ℒ\)-množic.
\end{posledica}

TODO: tu povedat, da je \(f(a)\) enojec in da je \(A ⊢ φ\) ekvivalentno
\(\hat A ⊢ φ\), tako da lahko \(f(a)\) jemljemo kot elemente v dokazih formul.


TODO: to lahko pride kasneje…
\begin{trditev}\label{th:ℒmor-into-compl-is-map}
  Naj bo \(f : A ↬ B \) in \(B\) polna \(ℒ\)-množica. Tedaj obstaja operacija
  \(φ : A → B\), za katero velja \(⟦b \sim f(a)⟧ = ⟦b =_B φ(a)⟧\).
\end{trditev}
\begin{dokaz}
  Za vsak \(a ∈ A\) je slika \(f(a)\) enojec, torej po polnosti \(B\) natanko
  določa en element \(B\), ki ga označimo \(φ(a)\). To definira preslikavo
  \(φ\).

  Po definiciji je \(\e a = \i{φ(a) \sim f(a)} = \e{φ(a)}\).
  Sedaj pa, če je \(a = a'\), je \(φ(a) \sim f(a')\), torej je \(φ(a) = φ(a')\).
\end{dokaz}
\begin{posledica}\label{th:set-eq-cset-with-maps}
  Kategorija polnih \(ℒ\)-množic je ekvivalentna kategoriji, katere
  \catdef
    {so polne \(ℒ\)-množice in}
    {so funkcije \(f : A → B\), ki zadoščajo sledečima pogojema:
      \begin{itemize}
      \item \(⊢ a = a' ⇒ f(a) = f(a')\), in
      \item \(⊢ \e{f(a)} ⇒ \e a\).
      \end{itemize}}
\end{posledica}


\subsubsection{Lastnosti morfizmov}

TODO: kako to napisat? ni res trditev, ampak da loh to definiramo bi blo fajn
prevert da je na nek način konsistentno. Loh rečem tud da je sam za relacije, k
pol vrstni red ni dvoumen.
NOTE: mogoče je vredno kar rečt, da če dokazujemo propozicijo potem vemo, da
obstaja \(b : B\), da je \(b \sim f(a)\), tako je \(f(a)\) pač element, dokler na
koncu naredimo truncation.

\begin{definicija}
  Naj bo \(f : A ↬ B\), \(R\) interna eniška relacija na \(B\), in \(a ∈ A\).
  Potem lahko \(R(f(a))\) interpretiramo kot \(\exist{b : B}{b \sim f(a)∧R(b)}\).
\end{definicija}
\begin{opomba}
  Na tej točki lahko torej 
\end{opomba}


% TODO: povemo kej o f(a) = g(a)
\begin{lema}
  Morfizma \(f\) in \(g : A ↬ B\) sta enaka natanko tedaj, ko velja 
  \[ ⊢ \for{a : A}{f(a) = g(a)}\text. \]
\end{lema}
\begin{proof}
  Pokažemo zgolj zanimivo smer.
  Predpostavimo torej, da velja gornja formula, in da je \(b \sim f(a)\), za neka
  \(a\) in \(b\). Potem po predpostavki vemo, da velja \(f(a) \sim g(a)\). Če to
  enakost razpišemo, dobimo da obstaja \(b' ∈ B\), tako da je \(b' \sim f(a)\) in
  \(b' \sim g(a)\). Potem je pa \(b = b'\), torej je \(b = b' \sim g(a)\). Ker je
  vloga \(f\) in \(g\) simetrična, ter \(a\) in \(b\) poljubna, velja
  \(b \sim f(a)\) natanko tedaj, ko velja \(b \sim g(a)\), torej sta \(f\) in \(g\)
  enaka.
\end{proof}
\begin{opomba}
  Ker je \(f(a) = g(a)\) ekvivalentno \(f(a) \sim g(a)\) zadošča pokazati zgolj
  \[ ⊢ \for{a : A}{f(a) \sim g(a)}\text. \]
\end{opomba}

\begin{konstrukcija}
  \emph{Potenčni objekt \(ℒ\)-množic \(A\) in \(B\)} je konstantna \(ℒ\)-množica
  \(ℒ\)-morfizmov \(A ↬ B\) in jo označimo \(B^A\).
\end{konstrukcija}
\begin{dokaz}
  TODO: Pokazati je treba, da je evaluacijska preslikava kot mora biti.
\end{dokaz}

\begin{trditev}\label{th:ℒsub-is-map-to-Ω}
  \(ℒ\)-podmnožice \(A\) so natanko morfizmi \(A ↬ Ω\).
\end{trditev}
\begin{dokaz}
  TODO: Dokaz
\end{dokaz}
\begin{konstrukcija}
  \emph{Klasifikator podobojektov} je \(ℒ\)-množica \(ℒ\) skupaj z enakostjo
  \(⇔\) in ga označimo \(Ω\).
\end{konstrukcija}
\begin{dokaz}
  Pokazati, da je to res klasifikator podobjektov je ubistvu kombinacija
  trditev~\ref{th:ℒsub-is-sub} in~\ref{th:ℒsub-is-map-to-Ω}.
\end{dokaz}


\begin{konstrukcija}
  Če je \(A\) \(ℒ\)-množica in za vsak \(a ∈ A\) \(Bₐ\) \(ℒ\)-množica je množica
  \(\sigma{a : A}{Bₐ}\) z enakostjo
  \(\i{\p{a, b} = \p{a', b'}} ≔ \i{a = a'}∧\i{b = b'}\) je \(ℒ\)-množica.
  Pravimo ji \emph{odvisna vsota}.

  Prav tako je \(\pi{a : A}{Bₐ}\) z enakostjo
  \(\i{f, g} ≔ \i{\for{a : A}{f(a) = g(a)}}\) \(ℒ\)-množica in ji pravimo
  \emph{odvisni produkt}.
\end{konstrukcija}
\begin{proof}
  TODO: kaj je \(b = b'\) tam? A imamo transport vzdolž enakosti?

  NOTE: Če je \(A\) samo indeksna še loh kej povemo. Mogoče rabim \(ℒ\)-množico
  \(ℒ\)-množic…
\end{proof}

Na podoben način bi si želeli karakterizirati epimorfizme in monomorfizme v
kategoriji \(\cat{Set}(ℒ)\), in res jih lahko karakteriziramo kot surjekcije in
injekcije v tem jeziku.

Najprej pa konstruirajmo še nekaj konstrukcij \(ℒ\)-množic, saj jih potrebujemo
v dokazu.
\begin{konstrukcija}
  Za \(ℒ\)-množici \(A\) in \(B\) je konstantna \(ℒ\)-množica \(\c{A+B}\) njuna
  vsota in jo označimo kar z \(A+B\). Poleg tega sta kanonični vložitvi \(ιᵢ\)
  operaciji.
\end{konstrukcija}
\begin{dokaz}
  Pokazati je treba, da sta vložitvi strogi in ekstenzionalni.
  Brez škode za splošnost lahko to pokažemo zgolj za \(ι : A → A+B\).
  Pri obeh primerih bomo imeli enakost v \(A+B\) zgolj na komponenti \(A\), tako
  da se bo enakost \(ι(a) = ι(a')\) vedno prevedla kar na \(a = a'\). Potem je
  pa preslikava očitno stroga in ekstenzionalna.
\end{dokaz}
\begin{konstrukcija}
  \emph{Kojedro} \(ℒ\)-preslikave \(f : A ↬ B\) je zlepek \(ℒ\)-množic
  \(B\) in \(B\) po podmnožici \(f[A]\). Označimo ga \(\coker(f)\).
\end{konstrukcija}
\begin{dokaz}
  Kot v Uvodu v geometrijsko topologijo ta zlepek konstruiramo kot kvocient
  \(ℒ\)-množice \(B+B\) po relaciji generirani z \(ι₁(b) \sim ι₂(b) ⇔ b ∈ f[A]\).

  TODO: pokazat da je kojedro.
\end{dokaz}

\begin{definicija}
  Morfizem \(f : A ↬ B\) je \emph{surjektiven}, ko velja
  % \[ ⊢ \for{b : B}{\exist{a ∈ A}{b = f(a)}}\text{ oziroma} \]
  \[ ⊢ \for{b : B}{b ∈ f[A]}\text, \]
  in \emph{injektiven}, ko velja
  \[ a, a' : A ⊢ f(a) = f(a') ⇒ a = a'\text. \]
\end{definicija}
\begin{trditev}
  Surjekcije so natanko epimorfizmi v \(\cat{Set}{\p{ℒ}}\).
\end{trditev}
\begin{dokaz}
  Naj bo \(f : A ↬ B\).

  Denimo, da je \(f\) surjektiven, \(g, h : B ↬ C\), in \(g ∘ f = h ∘ f\).
  Naj bo \(b : B\) in dokažimo \(g(b) = h(b)\).
  Po surjektivnosti potem obstaja \(a : A\), da je \(b = f(a)\). Potem je pa
  \(g(b) = g(f(a)) = h(f(a)) = h(b)\).

  Po drugi strani pa predpostavimo, da je \(f\) epimorfizem.
  Poglejmo si potem vložitvi v kojedro \(ι₁,ι₂ : B ↬ \coker(f)\).
  Te \(f\) po konstrukciji očitno izenači, saj je \(\coker(f)\) ravno zlepek
  kopij \(B\) po sliki \(f\). Torej sta po predpostavki enaki, saj je \(f\)
  epimorfizem. Tedaj pa za vsak \(b : B\) velja, da je \(ι₁(b) = ι₂(b)\), torej
  da je \(b ∈ f[A]\).
\end{dokaz}

\begin{trditev}
  Injekcije so natanko monomorfizmi v \(\cat{Set}{\p{ℒ}}\).
\end{trditev}
\begin{proof}
  Naj bo \(f : B ↬ C\).

  Denimo, da je \(f\) injektiven, \(g, h : A ↬ B\), in \(f ∘ g = f ∘ h\).
  Naj bo \(a : A\) in dokažimo \(g(a) = h(a)\).
  Vemo, da je \(f(g(a)) = f(h(a))\). Po injektivnosti to potem pomeni, da velja
  \(g(a) = h(a)\), kar smo tudi želeli.

  Obratno, naj bo \(f\) monomorfizem in \(a, a' : A\).
  Denimo, da velja \(f(a) = f(a')\) in naj bosta \(g, h : \mb1 ↬ A\) definirana
  s predpisoma \(g(*) \sim a\) ter \(h(*) \sim a'\). Potem pa velja tudi
  \(f(g(*)) \sim f(a) = f(a') \sim f(h(*))\), torej je \(f∘g = f∘h\). Od tod pa
  sledi, da je \(g = h\), torej velja \(a \sim g(*) = h(*) \sim a'\).
\end{proof}

Sedaj se pa želimo vprašati, kaj so bijekcije \(ℒ\)-množic.
Že iz teorije množic vemo, da ima vsaka relacija dualno relacijo, ki se pa
obnaša kot nekakšen inverz. Za morfizem \(f : A ↬ B\) lahko definiramo dual
\(f⁻¹ : A×B → ℒ\) tako, da preprosto zamenjamo elementa v produktu.
Kompozituma z dualom pa sta res identiteti.

\begin{trditev}
  Za \(f : A ↬ B\) je \(f⁻¹\) morfizem, natanko tedaj, ko je \(f\) bijektiven.
  V tem primeru potem velja \(f∘f⁻¹ = \id = f⁻¹∘f\).
\end{trditev}
\begin{dokaz}
  Naj bo \(b' = f(f⁻¹(b))\). Potem za nek \(a : A\) velja \(b' = f(a)\) in
  \(a = f⁻¹(b)\), oziroma \(f(a) = b\). Potem je pa \(b = b'\).
  Obratno, naj bo \(a' = f⁻¹(f(a))\). Potem za nek \(b : A\) velja \(a' = f⁻¹(b)\)
  in \(b = f(a)\), oziroma \(f⁻¹(b) = a\). Potem je pa \(a = a'\).
\end{dokaz}

TODO: global existence


%%% Local Variables:
%%% TeX-master: "main"
%%% End:
