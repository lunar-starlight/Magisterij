\section{TopoloÅ¡ki modeli}

% Teorija modelov morda zveni kot zelo abstraktna in filozofska zadeva (govora je
% o matematiÄnih svetovih), vendar je pa ideja sama blizu vsakemu matematiku, ki
% je dokonÄal drugi letnik dodiplomskega Å¡tudija.
% Situacija je namreÄ zelo podobna teoriji grup. Struktura grupe je skupek
% aksiomov (tako kot jih ima konstruktivna logika ali pa teorija mnoÅ¾ic), medtem
% ko so pa grupe same natanko \emph{modeli} teh aksiomov, in na model logike
% mislimo na isti naÄin.

% Seveda pa grupe niso edina struktura, za katero lahko izvedemo to analogijo.
% Lahko tudi gledamo modele monoidne, kolobarske, vektorske,~itd.~strukture, prav
% tako pa lahko gledamo modele topoloÅ¡ke strukture ali pa modele izraÄunljivostne
% strukture (recimo turingove stroje).

% V logiki in teoriji mnoÅ¾ic, se pogosto spraÅ¡ujemo, ali so kakÅ¡ne trditve
% \emph{neodvisne} od aksiomov naÅ¡ega sistema. Na primer aksiom izbire je
% neodvisen od preostalih aksiomov teorije mnoÅ¾ic, hipoteza kontinuuma je
% neodvisna od teorije mnoÅ¾ic z izbiro,~itd. Neodvisnost je mogoÄe malce
% nedostopen pojem, Å¡e posebej za matematike, ki verjamejo v absolutno resnico.
% NamreÄ, kako lahko trditev ni niti resniÄna niti neresniÄna? Ampak bistvo je v
% tem, da trditev ima resniÄnostno vrednost \emph{v vseh modelih}, vendar Äe je ta
% resniÄnostna vrednost razliÄna v razliÄnih modelih, je trditvi ne moremo
% dodeliti, tako da bo bilo to res v vseh modelih! KljuÄno je namreÄ, da noben
% model logike ni \emph{odlikovan}, torej nimamo \quot{standardnega modela}.

% To se vse sliÅ¡i nekoliko komplicirano, a nam je zares Å¾e intimno znano. V
% teoriji grup namreÄ vemo za \quot{komutativnost}, za katero vemo, da se je ne da
% dokazati iz aksiomov grupe, prav tako pa ne velja njena negacija. To pa vemo
% natanko zato, ker obstajajo in komutativne in nekomutativne grupe (oziroma
% modeli aksiomov grup). V teoriji grup prav tako nimamo \quot{standardne grupe},
% za katero velja natanko vse kar velja za vse grupe.

% V logiki takim stvarem pravimo \quot{neodvisne trditve}, v teoriji
% izraÄunljivosti tem pravimo \quot{neizraÄunljive funkcije}, v algebri in
% topologiji pa \quot{lastnosti algebraiÄne strukture oz.~topoloÅ¡kega prostora}.

% Skratka, prehod med aksiomatskim sistemom in modeli nam je kot matematikom znan,
% v algebri smo bili z njim vzgojeni Å¾e od malega, a v logiki te sreÄe Å¾al nismo
% imeli. Tako se moramo na stara leta pruiÄiti teh metod, ki so pa logikom brez
% dvoma enako pomembne kot so grupe algebrajikom, ali pa prostori topologom.

% Kot smo pa omenili v uvodu, pa obstajajo modeli logike, ki so zgrajeni iz
% topoloÅ¡kih prostorov. Tem pravimo topoloÅ¡ki modeli, in vse logiÄne trditve v tem
% modelu se prevedejo v topoloÅ¡ke trditve o topoloÅ¡kem prostoru. Sledi naravno
% vpraÅ¡anje, ali lahko vzpostavimo nekak slovar med neodvisnimi trditvami
% (t.~j.~klasiÄnimi principi v konstruktivni logiki) in topoloÅ¡kimi lastnostmi, ki
% so nam znane.

% Do tega se vrnemo kasneje, v naslednjem razdelku, za zdaj nas pa Äaka malo
% teorije snopov, da lahko topoloÅ¡ke modele sploh definiramo.

TODO: rewrite

% Oglejmo si najprej primer zveznih funkcij iz \(X\) v \(â„\).
% Zanje se vedno lahko vpraÅ¡amo, Äe so pozitivne, negativne, ali so gladke,
% ipd.~vendar nas pogosto zanima tudi \emph{kje} za doloÄeno funkcijo neka
% lastnost velja. Recimo preprosto, da je \(f : â„ â†’ â„\) identiteta. Tedaj je
% pozitivna na \((0,âˆ)\), negativna na \((-âˆ,0)\), gladka pa na celem \(â„\).
% KlasiÄno je pozitivnost funkcije resniÄnostna vrednost. Z drugimi besedami,
% pozitivnost je predikat na (zveznih) realnih funkcijah. Mi pa zares Å¾elimo
% opredeliti, kje ta lastnost velja, ne zgolj Äe velja na celem prostoru.
% Å½elimo torej, da ima ``prava'' pozitivnost vrednosti v podmnoÅ¾icah prostora
% \(X\), in da bo imela topologija \(X\) kaj vpliva naj bodo to zgolj odprte
% podmnoÅ¾ice.

% Å½elimo pa tudi obravnavati funkcije, ki niso definirane na celotni domeni, na
% primer \(x â†¦ xâ»Â¹\). Tako naÅ¡ primer razÅ¡irimo na mnoÅ¾ico vseh funkcij \(U â†’ â„\),
% kjer je \(U âˆˆ ğ’ªX\), in oznaÄimo mnoÅ¾ico vseh teh funkcij z \(R\). Potem pa za
% \(f âˆˆ R\) definiramo \emph{definicijsko obmoÄje} oziroma \emph{razpon} kot
% domeno funkcije \(f\), in ga oznaÄimo \(â€–fâ€–\).
% Na to mnoÅ¾ico lahko sedaj uvedemo predikat enakosti, ki seveda meri, na kateri
% mnoÅ¾ici se dve funkciji ujemata, na oÄiten naÄin:
% \[ âŸ¦f = gâŸ§ = \int\set{t âˆˆ â€–fâ€–âˆ©â€–gâ€–}{f(t) = g(t)}\text. \]

% Ni nakljuÄje, da preslikavam \(R â†’ ğ’ªX\) pravimo predikati, saj se da pokazati,
% da za vsako polno Heytingovo algebro (kar \(ğ’ªX\) je) obstaja nek model
% konstruktivne matematike, tako da so resniÄnostne vrednosti natanko odprte
% mnoÅ¾ice \(X\). V tem smislu \(âŸ¦f = gâŸ§\) predstavlja kar enakost med funkcijami,
% \(â€–fâ€–\) je pa predikat obstoja elementa \(â€–fâ€– = \exist{f : R}{âŠ¤}\). Velja tudi
% enakost \(â€–fâ€– = âŸ¦f = fâŸ§\), torej zares predikata \(â€–-â€–\) ne potrebujemo.

% V sploÅ¡nem, mnoÅ¾icam kot so \(R\), torej takim, da imajo definirano enakost z
% vrednostmi v \(ğ’ªX\) pravimo \emph{Heytingovo vrednotene mnoÅ¾ice},
% \emph{\(ğ’ªX\) vrednotene mnoÅ¾ice}, ali na kratko \emph{\(ğ’ªX\)-mnoÅ¾ice}.

\subsection{Logika odprtih mnoÅ¾ic}
% TODO: podrobno propozicijsko logiko topologije


\subsection{Heytingovo-vrednotene mnoÅ¾ice}


% Naj bo \(F\) snop. Potem po lemi Yonede velja \(F(U) = \textrm{Nat}{\p{ã‚ˆU, F}}\), torej so
% elementi snopa natanko doloÄeni s preslikavami v snop.
% Poleg tega pa za snopa \(F\) in \(G\) ter naravno transformacijo \(Î± : F â‡’ G\)
% med njima velja, da \(Î±\) komutira z zoÅ¾itvami, torej, Äe je \(V âŠ† U\) in
% \(f âˆˆ F(U)\), velja \(Î±_V(f{\res V}) = Î±_U(f){\res V}\).
% To pa pomeni, da so vrednosti morfizma natanko doloÄene z vrednostmi pri tako
% imenovanih globalnih lokalnih prerezih ozirmoa elementih.
% V mislih imamo na primer primer iz kompleksne analize, kjer gledamo snop
% kompleksnih logaritmov. Vemo, da globalen logaritem ne obstaja, vendar pa vseeno
% obstajajo loklani logaritmi, te imajo pa maksimalne analitiÄne razÅ¡iritve, ki
% bi jim lahko rekli \quot{globalni lokalni logaritmi}.

% Bolj natanÄno torej, naj bo \(\ln\) mnoÅ¾ica parov \(\p{U, Ï†}\), kjer je
% \(U âŠ† â„‚\) in \(Ï† : U â†’ â„‚\) lokalni logaritem, tako da ne obstaja nobena mnoÅ¾ica
% veÄja od \(U\), na katero lahko \(Ï†\) razÅ¡irimo.
% Potem je vsak ellement snopa logaritmov zoÅ¾itev nekega elementa \(\ln\), poleg
% tega pa so vsi elementi \(\ln\) paroma neskladni (sicer bi jih lahko zlepili in
% dobili strogo razÅ¡iritev obeh, kar je v protislovju z maksimalnostjo elementov
% \(\ln\)).

% Naivno bi sedaj Å¾eleli snop logaritmov \quot{generirati} z elementi \(\ln\),
% tako da bi vzeli \(V â†¦ \set{Ï†{\res V}}{(U, Ï†) âˆˆ \ln \text{ in } V âŠ† U}\), in to
% v tem primeru res deluje, ampak v sploÅ¡nem pa ne moremo tvoriti zoÅ¾itev.
% Lahko vzamemo potem \(Ï†{\res V}\) kot formalni element, kjer pa spet nastane
% problem, da Äe se dva prereza ujemata na neki mnoÅ¾ici, morata biti njuni
% zoÅ¾itvi na to mnoÅ¾ico enaki. To lahko popravimo tako da vpeljemo nekakÅ¡no
% relacijo na prerezih, ki nam pove ko kakÅ¡ne mere se ujemata (oziroma nam da
% najveÄjo odprto mnoÅ¾ico, kjer sta enaka). PiÅ¡emo jo lahko recimo \(âŸ¦Ï† = ÏˆâŸ§\).
% Ta relacija bo gotovo simetriÄna, prav tako pa bo \quot{tranzitivna}, t.j. Äe se
% \(Ï†\) in \(Ïˆ\) ujemata na \(U\), in \(Ïˆ\) in \(Î¾\) na \(V\), se \(Ï†\) in \(Î¾\)
% gotovo ujemata vsaj na preseku \(Uâˆ©V\). OÄitno pa ta relacija ni refleksivna, v
% smislu da je \(Ï†\) v relaciji s samim sabo zgolj na mnoÅ¾ici, na kateri je
% definiran. To pomeni, da lahko za \(\ln\) namesto parov \(\p{U, Ï†}\) vzamemo kar
% prereze same, saj lahko \(U\) dobimo iz \(âŸ¦Ï† = Ï†âŸ§\). Tej mnoÅ¾ici pravimo
% \emph{razpon \(Ï†\)} in jo piÅ¡emo tudi \(â€–Ï†â€–\).

% %Ostane le Å¡e problem kako pravilno tvoriti kvocient iz te relacije, kar pa
% %upamo, da se ognemo z bolj strukturiranim pogledom.

% Zgoraj opisanem postopku se reÄe tudi konstrukcija toposa iz
% triposa~\angl{tripos to topos construction} in je to tudi motivacijski primer za
% razvoj te konstrukcije.

Oglejmo si spet primer naravnih Å¡tevil nad nekim prostorom \(X\). To bodo zvezne
preslikave iz odprtih podmnoÅ¾ic \(X\) v \(â„•\).
Najprej, lahko vsaki taki preslikavi dodelimo ``resniÄnostno vrednost obstoja'',
oziroma \emph{razpon}, ki bo kar njena domena. To oznaÄimo z \(â€–-â€–\). ÄŒe je
\(n : U â†’ â„•\), potem \(n\) obstaja zgolj na \(U\), saj izven \(U\) nima
vrednosti. RazliÄni taki naravni Å¡tevili lahko tudi primerjamo, tako da
preprosto pogledamo mnoÅ¾ico, na kateri sta enaki: \(âŸ¦n = mâŸ§ = \set{t âˆˆ X}{n(t) = m(t)}\),
kjer seveda pazimo, da \(t\) jemljemo zgolj iz razpona obeh Å¡tevil.
NaÄeloma bi morali vzeti notranjost te mnoÅ¾ice, saj morajo biti resniÄnostne
vrednosti odprte, ampak v tem primeru, ker so funkcije lokalno konstantne, bo ta
mnoÅ¾ica odprta. Potem pa se izkaÅ¾e, da Äe velja enakost \(âŸ¦n = nâŸ§ = \dom(n)\),
tako da Äe znamo primerjati vsa Å¡tevila, lahko izpeljemo tudi razpon, kar bomo
tudi vzeli kot osnovni gradnik naÅ¡ih modelov.


Naj bo \(\p{X, â„’}\) topoloÅ¡ki prostor.
Implikacijo \(U â‡’ V\) definiramo kot \(â‹ƒ\set{W âˆˆ â„’}{W âˆ© U âŠ† V}\). Tako potem
velja \(\p{Uâ‡’V}âˆ©U âŠ† V\). 
% Ker je \(â„’\) podmnoÅ¾ica potenÄne mnoÅ¾ic
% je potem tudi mreÅ¾a, izkaÅ¾e pa se, da iz topoloÅ¡kih aksiomov sledi, da je celo
% polna Heytingova algebra, zato bomo uporabljali simbole \(âˆ§\),\(âˆ¨\), in \(â‰¤\)
% namesto \(âˆ©\), \(âˆª\), in \(âŠ†\), kot smo vajeni ko na topologijo gledamo kot
% mnoÅ¾ice.

% TODO: name?
\begin{definicija}
  \emph{\(â„’\)-vrednotena mnoÅ¾ica} oziroma \emph{\(â„’\)-mnoÅ¾ica} je mnoÅ¾ica \(A\),
  skupaj s preslikavo, ki jo piÅ¡emo \(âŸ¦- = -âŸ§ : AÃ—A â†’ â„’\), tako da velja
  \begin{align*}
    âŸ¦ a = b âŸ§ âŠ† âŸ¦ b = a âŸ§\\
    âŸ¦ a = b âŸ§ âˆ© âŸ¦ b = c âŸ§ âŠ† âŸ¦ a = c âŸ§
  \end{align*}
  ÄŒe iz konteksta ni razvidno kateri mnoÅ¾ici pripada preslikava \(âŸ¦- = -âŸ§\),
  jo piÅ¡emo z indeksom \(âŸ¦- =_A -âŸ§\).

  Kot zgoraj naj bo \(â€–aâ€– â‰” âŸ¦a = aâŸ§\) \emph{razpon \(a\)}.
\end{definicija}

ÄŒe \(âŠ†\) beremo kot implikacijo, zgornja aksioma zgledata zelo podobno aksiomoma
simetriÄnosti in tranzitivnosti delno urejenih mnoÅ¾ic. Ker v intuicionistiÄni
logiki na okvirje gledamo kot resniÄnostne vrednosti, in zaradi tenzor-hom
adjunkcije, lahko to podobnost reificiramo v tako imenovani jezik triposa.

Ker je \(aâˆ§b â‰¤ c\) natanko tedaj ko \(a â‰¤ bâ‡’c\) (ker je \(â„’\) okvir),
lahko \(a â‰¤ b\) interpretiramo kot \(âŠ¤ = aâ‡’b\), kjer \(âŠ¤\) predstavlja vrhnji
element okvira, prav tako pa predstavlja \quot{resnico}.
To pomeni, da res na \(a â‰¤ b\) lahko gledamo kot \quot{iz \(a\) sledi \(b\)}.

Naslednji izziv je definirati preslikave med \(â„’\)-mnoÅ¾icami.
Problem je, da elementi kodomene ne nujno zares obstajajo kot elementi mnoÅ¾ice
same. Na primer, naj bo \(â„’\) diskretna topologija na dveh elementih, \(A\) naj
ima en element (\(a\)) definiran povsod, \(B\) pa dva elementa (\(bâ‚€\) in
\(bâ‚\)) definirana v vsaki od toÄk prostora. Sedaj pa Å¾elimo definirati
preslikavo, ki \(a\) slika v \(bâ‚€\) na toÄki \(0\) in \(bâ‚\) na toÄki ena (kar
je moÅ¾no v internem jeziku), pa naletimo na teÅ¾avo, ker take funkcije ne moramo
izraziti kot dejansko funkcijo \(A â†’ B\). Tako moramo preslikave izraziti kot
funkcijske relacije (v internem jeziku), kar tudi storimo.

% ÄŒe pomislimo spet na snope, je preslikava iz \(F\) v \(G\) Å¾e doloÄena z
% globalnimi lokalnimi elementi, vendar pa nam niÄ ne zagotavlja, da so njihove
% slike prav tako globali loklani elementi v \(G\), je pa gotovo zoÅ¾itev nekega
% (potencialno neenoliÄnega) takega elementa.

% ÄŒe je \(f âˆˆ F'\) in \(Î± : F â‡’ G\), velja \(â€–fâ€– = â‹_{g âˆˆ G'} âŸ¦g = Î±(f)âŸ§\),
% kjer z \(F'\) in \(G'\) oznaÄimo mnoÅ¾ici globalnih lokalnih elementov.
% Ta enaÄba nam torej predstavlja celovitost, pri enoliÄnosti pa moramo paziti.
% Kot reÄeno, globalni lokalni element v \(G\) ni enoliÄno doloÄen, je pa enoliÄno
% doloÄena njegova (oziroma njihova) zoÅ¾itev na razpon \(f\).
% Velja Å¡e veÄ, Äe pogledamo primerjavi \(Î±(f)\) z dvema elementoma \(g\) in
% \(g'\), po tranzitivnosti relacije dobimo, da je presek teh dveh mnoÅ¾ic nujno
% vsebovan v \(âŸ¦g = g'âŸ§\), torej na nobeni odprti mnoÅ¾ici ni \(Î±(f)\) enak dvema
% elementoma.

% Definirajmo torej morfizem \(â„’\)-mnoÅ¾ic kot tako relacijo.

\begin{definicija}
  \emph{Morfizem med \(â„’\)-mnoÅ¾icama} \(A\) in \(B\) je preslikava \(âŸ¦- = f(-)âŸ§ : BÃ—A â†’ â„’\),
  za katero velja
  \begin{align}% TODO: change
    &âŸ¦b =_B b'âŸ§ âˆ§ âŸ¦b' = f(a)âŸ§ â‰¤ âŸ¦b = f(a)âŸ§    \tag{M1}\label{M1}\\
    &âŸ¦b = f(a')âŸ§ âˆ§ âŸ¦a' =_A aâŸ§ â‰¤ âŸ¦b = f(a)âŸ§    \tag{M2}\label{M2}\\
    &âŸ¦b = f(a)âŸ§ âˆ§ âŸ¦b' = f(a)âŸ§ â‰¤ âŸ¦b =_B b'âŸ§    \tag{M3}\label{M3}\\
    &â€–aâ€– = â‹_{b âˆˆ B} âŸ¦b = f(a)âŸ§               \tag{M4}\label{M4}
  \end{align}
  Na prvi dve pravili lahko gledamo kot na skladnost z relacijama na \(A\) in
  \(B\), na drugi dve pa kot na enoliÄnost in celovitost, zato piÅ¡emo morfizme
  tudi v bolj funkcijskem zapisu kot \(f : A â†¬ B\).

  ÄŒe imamo morfizma \(A \oset{f}{â†¬} B \oset{g}{â†¬} C\),
  je njun kompozitum \(gf : A â†¬ C\) definiran kot
  \[ âŸ¦c = gf(a)âŸ§ â‰” â‹_{b âˆˆ B} âŸ¦c = g(b)âŸ§âˆ§âŸ¦b = f(a)âŸ§\text. \]
\end{definicija}
\begin{opomba}
  Podobnost med oklepaji je namerna, je pa vseeno vredno poudariti, da izraz
  \(âŸ¦b = f(a)âŸ§\) ni povezan z izrazom \(âŸ¦b =_B b'âŸ§\) niÄ veÄ, kot lahko sklepamo
  iz gornjih aksiomov. DrugaÄe reÄeno, kljub temu, da na \(âŸ¦b = f(a)âŸ§\) Å¾elimo
  gledati kot primerjavo slike \(a\) v \(â„’\)-mnoÅ¾ici \(B\), se izraza vseeno
  bistveno razlikujeta, namreÄ v \(B\) ne obstaja nujno kak element, ki bi mu
  lahko rekli slika \(a\).
\end{opomba}

Vseeno pa v jeziku triposa na \(â‹_{b âˆˆ B} Ï†(b)\) gledamo kot eksistenÄni
kvantifikator, torej \ref{M4} res pravi, da obstaja nek \(b\), ki je slika
elementa \(a\), definicija kompozicije pa je potem natanko standardna
kompozicija relacij.

Skupaj z identiteto \(âŸ¦- =_A -âŸ§\), tvorijo \(â„’\)-mnoÅ¾ice kategorijo, ki jo oznaÄimo \(\cat{Set}(â„’)\).

\begin{lema}
  Naj bosta \(f, g : A â†¬ B\) morfizma.
  Potem sta enaka natanko tedaj, ko velja
  \[ \for{a âˆˆ A, b âˆˆ B}{ âŸ¦b = f(a)âŸ§ â‰¤ âŸ¦b = g(a)âŸ§ }.\]
\end{lema}
\begin{dokaz}
  V eno smer je trditev oÄitna, tako da predpostavimo,
  da za vsaka \(a\) in \(b\) velja \(âŸ¦b = f(a)âŸ§ â‰¤ âŸ¦b = g(a)âŸ§\).
  Dokazati moramo torej, da velja tudi druga neenakost.
  \begin{align*}
    âŸ¦b = g(a)âŸ§
    &= âŸ¦b = g(a)âŸ§ âˆ§ âŸ¦a = aâŸ§ = âŸ¦b = g(a)âŸ§ âˆ§ \bigvee_{b' âˆˆ B} âŸ¦b' = f(a)âŸ§\\
    &= \bigvee_{b' âˆˆ B} âŸ¦b = g(a)âŸ§ âˆ§ âŸ¦b' = f(a)âŸ§ âˆ§ âŸ¦b' = g(a)âŸ§\\
    &â‰¤ \bigvee_{b' âˆˆ B} âŸ¦b = b'âŸ§ âˆ§ âŸ¦b' = f(a)âŸ§ â‰¤ âŸ¦b = f(a)âŸ§.\qedhere
  \end{align*}
\end{dokaz}

ÄŒe na zgornjo formulo gledamo kot neko trditev v jeziku mnoÅ¾ic in funkcij, bi se
brala kot "Äe je \(f(a) = b\) je potem tudi \(g(a) = b\)", kar pa ponavadi res
pomeni, da sta funkciji \(f\) in \(g\) enaki.

Na podoben naÄin bi si Å¾eleli karakterizirati epimorfizme in monomorfizme, v
kategoriji \(\cat{Set}(â„’)\), in res jih lahko karakteriziramo kot surjekcije in
injekcije v tem jeziku:

\begin{trditev}
  Morfizem \(f : A â†¬ B\) je epimorfizem, Äe velja
  \[ \for{b âˆˆ B}{ âŸ¦b = bâŸ§ = â‹_{a âˆˆ A} âŸ¦b = f(a)âŸ§ }\text, \]
  in monomorfizem, Äe velja % TODO: A kvantificiram?
  \[ \for{a,a' âˆˆ A, b âˆˆ B}{ âŸ¦b = f(a)âŸ§ âˆ§ âŸ¦b = f(a')âŸ§ â‰¤ âŸ¦a = a'âŸ§}\text. \]
\end{trditev}
\begin{dokaz}
  % TODO: dokaz
  long and arduous
\end{dokaz}

Sedaj se pa Å¾elimo vpraÅ¡ati, kaj so bijekcije v kategoriji \(\cat{Set}(â„’)\).
Å½e iz teorije mnoÅ¾ic vemo, da ima vsaka relacija dualno relacijo, ki se pa
obnaÅ¡a kot nekakÅ¡en inverz. Za morfizem \(f : A â†¬ B\) lahko definiramo dual
\(fâ»Â¹ : B â†¬ A\) tako, da preprosto zamenjamo elementa v produktu.
Kompozituma z dualom pa sta res identiteti.

\begin{trditev}
  Za \(f : A â†¬ B\) je \(fâˆ˜fâ»Â¹ = \id = fâ»Â¹âˆ˜f\).
\end{trditev}
\begin{dokaz}
  \begin{align*}
    âŸ¦b' = ffâ»Â¹(b)âŸ§
    &= â‹_{a âˆˆ A} âŸ¦b' = f(a)âŸ§âˆ§âŸ¦a = fâ»Â¹(b)âŸ§\\
    &= â‹_{a âˆˆ A} âŸ¦b' = f(a)âŸ§âˆ§âŸ¦b = f(a)âŸ§ â‰¤ âŸ¦b' = bâŸ§\\
    âŸ¦a' = fâ»Â¹f(a)âŸ§
    &= â‹_{b âˆˆ B} âŸ¦a' = fâ»Â¹(b)âŸ§âˆ§âŸ¦b = f(a)âŸ§\\
    &= â‹_{b âˆˆ V} âŸ¦a' = fâ»Â¹(b)âŸ§âˆ§âŸ¦a = fâ»Â¹(b)âŸ§ â‰¤ âŸ¦a' = aâŸ§\qedhere
  \end{align*}
\end{dokaz}

Ta dokaz zgleda, kot da pravi, da je vsak morfizem izomorfizem, vendar to oÄitno
ni res. In res, v zgornjem dokazu uporabimo, da je \(fâ»Â¹\) sploh morfizem
\(â„’\)-mnoÅ¾ic. Prvima dvema aksiomoma je Å¾e zadoÅ¡Äeno, druga dva sta pa
ekvivalentna natanko injektivnosti in surjektivnosti \(f\).

Iz gornjega sicer zgleda, kot da potrebujemo zgolj injektivnost \(f\), vendar pa
morata biti tudi kompozituma \(ffâ»Â¹\) in \(fâ»Â¹f\) \(â„’\)-morfizma, kjer se pa
skriva uporaba preostalih aksiomov.

Trditev se torej pravilno glasi tako:
\begin{trditev}
  Za \(f : A â†¬ B\) je \(fâ»Â¹\) (morfizem in) inverz \(f\) natanko tedaj, ko je \(f\) bijektivna.
\end{trditev}

\subsubsection{Karakterizacija podobjektov}

Z uporabo gornje karakterizacije monomorfizmov, lahko karakteriziramo tudi podobjekte.

Denimo, da je \(S\) podsnop snopa \(F\). To pomeni, da je snop, in da za vsako odprto
mnoÅ¾ico velja \(S(U) âŠ† F(U)\), in naj bo \(F'\) spet mnoÅ¾ica globalnih lokalnih
elementov. Potem vsakemu elementu \(F'\) lahko priredimo najveÄjo odprto
mnoÅ¾ico, tako da je zoÅ¾itev tega elementa v \(S\) (seveda bodo potem tudi vse
manjÅ¡e zoÅ¾itve v \(S\)). OznaÄimo to recimo z \(âŸ¦f âˆˆ SâŸ§\), za \(f âˆˆ F'\).

Ker je vsak element \(F\) zoÅ¾itev nekega elementa \(F'\), lahko podsnop \(S\)
rekonstruiramo kot \(S(U) = \set{f{\res U}}{f âˆˆ F' \text{ in } âŸ¦f âˆˆ SâŸ§ âŠ‡ U}\).

% Gornjo konstrukcijo lahko natanÄno definiramo na \(â„’\)-mnoÅ¾icah:
Sledi, da so podsnopi \(F\) natanko doloÄene preslikave \(F'\) v \(â„’\), kar pa
lahko izrazimo z \(â„’\)-mnoÅ¾icami.

\begin{definicija}
  \(â„’\)-podmnoÅ¾ica \(A\) je preslikava \( âŸ¦- âˆˆ SâŸ§ : A â†’ â„’ \), za katero velja
  \begin{align*}
    &âŸ¦a âˆˆ SâŸ§ â‰¤ âŸ¦a = aâŸ§\\
    &âŸ¦a = a'âŸ§ âˆ§ âŸ¦a' âˆˆ SâŸ§ â‰¤ âŸ¦a âˆˆ SâŸ§
  \end{align*}
  t.~j. je skladna z relacijo na \(A\). PiÅ¡emo tudi \(S âŠ‘ A\).
\end{definicija}
\begin{lema}
  Za \(â„’\)-podmnoÅ¾ico \(S âŠ‘ A\) velja \(âŸ¦a = a'âŸ§âˆ§âŸ¦a' âˆˆ SâŸ§ = âŸ¦a = a'âŸ§âˆ§âŸ¦a âˆˆ SâŸ§\).
\end{lema}

\begin{trditev}
  Obstaja ekvivalenca med delnima ureditvima \(â„’\)-podmnoÅ¾ic \(A\) in podobjektov \(A\).
\end{trditev}
\begin{proof}
  Naj bo \(m : S â†¬ A\) monomorfizem \(â„’\)-mnoÅ¾ic.
  Potem definiramo preslikavo \( âŸ¦- âˆˆ mâŸ§ : A â†’ â„’ \) s predpisom
  \(a â†¦ â‹_{s âˆˆ S} âŸ¦a = m(s)âŸ§\).

  Ta preslikava definira \(â„’\)-mnoÅ¾ico, saj velja
  \begin{align*}
    &âŸ¦a âˆˆ mâŸ§ = â‹_{s âˆˆ S} âŸ¦a = m(s)âŸ§ â‰¤ â‹_{s âˆˆ S} âŸ¦a = aâŸ§ = â€–aâ€–\text{ in}\\
    &âŸ¦a = a'âŸ§âˆ§âŸ¦a' âˆˆ mâŸ§ = â‹_{s âˆˆ S} âŸ¦a = a'âŸ§âˆ§âŸ¦a' = m(s)âŸ§ â‰¤ â‹_{s âˆˆ S} âŸ¦a = m(s)âŸ§ = âŸ¦a âˆˆ mâŸ§\text.
  \end{align*}

  
  % TODO: complete proof
\end{proof}


\subsubsection{Polne \(â„’\)-mnoÅ¾ice}


Prej smo Å¾e omenili, da lahko iz globalnih lokalnih elementov rekonstruiramo
snop, vendar je ta konstrukcija komplicirana, poleg tega pa potem delamo z
nekimi kvocienti, kar nikoli ni prijetno. Tako bi Å¾eleli, da bi naÅ¡e
\(â„’\)-mnoÅ¾ice kar dopolnili Å¡e z vsemi ostalimi elementi snopa. Vemo, da imamo
za to dovolj informacij, saj je vsak element zoÅ¾itev enega od globalnih
lokalnih, je pa vseeno izziv kako identificirati zoÅ¾itve, ki se ujemajo.

Trik, ki ga bomo uporabili smo Å¾e sreÄali pri motivaciji za definicijo
\(â„’\)-preslikav, namreÄ, da lahko element snopa \(f\) primerjamo z vsemi
globalnimi lokalnimi elementi, torej da dobimo funkcijo iz \(â„’\)-mnoÅ¾ice v okvir
\(â„’\). Ta konstrukcija v snopih enoliÄno doloÄa elemente, torej Äe sta
\(f âˆˆ F(U)\) in \(g âˆˆ F(V)\), in se njune primerjave ujemata na vseh globalnih
lokalnih elementih, se v posebnem tudi ujemata z neko razÅ¡iritvijo \(f\) (ki jo
oznaÄimo \(f'\)), torej velja \(f{\res V} = f'{\res{Uâˆ©V}} = g{\res U}\), kar pa
pomeni, da sta \(f\) in \(g\) skladna. Potem pa nam vsaka primerjava definira
skladno druÅ¾ino, ki jo lahko zlepimo v enoliÄen element snopa.

Spomnimo se pa, da so take funkcije natanko podobjekti, in Äe je element
podobjekta enoliÄno doloÄen, mu lahko pravimo enojec, oziroma podenojec, ker ta
element ne obstaja nujno med globalnimi lokalnimi elementi. Vendar pa kljub
temu, da so te podenojci lahko \quot{prazni}, imajo dovolj zanimivo strukturo,
da iz njih lahko rekonstruiramo celoten snop.

% % TODO: reword
% Naj bo \(F\) snop nad \(â„’\). Potem lahko za \(m âˆˆ F(U)\) definiramo enojec
% \(âŸ¦a âˆˆ âŸ¨mâŸ©âŸ§ â‰” âŸ¦a = mâŸ§\), kjer je \(a âˆˆ F(V), V âˆˆ â„’\).
% Na enojcih lahko definiramo tudi \(âŸ¦âŸ¨mâŸ© = âŸ¨nâŸ©âŸ§ â‰” âŸ¦m = nâŸ§\).
% Snop \(F\) lahko sedaj rekonstruiramo iz njegovih enojcev.
% Podobno bomo storili za \(â„’\)-mnoÅ¾ice.

\begin{definicija}
  \emph{(Pod)enojec} na \(â„’\)-mnoÅ¾ici \(A\) je \(â„’\)-podmnoÅ¾ica \(S âŠ‘ A\), za katero velja
  \[ \for{a,b âˆˆ S}{âŸ¦a âˆˆ SâŸ§ âˆ§ âŸ¦b âˆˆ SâŸ§ â‰¤ âŸ¦a = bâŸ§}\text. \]
\end{definicija}
\begin{opomba}
  ÄŒe razpiÅ¡emo definicijo \(â„’\)-podmnoÅ¾ic, dobimo da so enojci preslikave, ki poleg
  gornjemu pogoju zadoÅ¡Äajo zgolj Å¡e drugi pogoj \(â„’\)-podmnoÅ¾ic, torej
  \[ \for{a,b âˆˆ A}{âŸ¦a = bâŸ§ âˆ§ âŸ¦b âˆˆ SâŸ§ â‰¤ âŸ¦a âˆˆ SâŸ§}\text. \]
\end{opomba}

V jeziku triposa to res pravi, da ima podenojec kveÄjemu en element.
\begin{opomba}
  V literaturi se tem preslikavam reÄe kar enojci, saj enoliÄno doloÄajo
  elemente snopa.
\end{opomba}

\begin{lema}% TODO: refactor. this should be a definition or something.
  Za vsak \(m âˆˆ A\) lahko tvorimo enojec \(Ïƒâ‚˜ : A â†’ â„’\), s predpisom
  \(a â†¦ âŸ¦a = mâŸ§\). \(â„’\)-mnoÅ¾ico enojcev \(A\) z relacijo
  \(âŸ¦Ï = Ï„âŸ§ â‰” â‹_{a âˆˆ A} Ï(a)âˆ§Ï„(a)\) oznaÄimo \(Ïƒ(A)\).
\end{lema}
\begin{dokaz}
  Preslikava \(Ïƒâ‚˜\) je res enojec, saj velja
  \begin{align*}
    Ïƒâ‚˜(a)âˆ§Ïƒâ‚˜(b) &= âŸ¦a = mâŸ§âˆ§âŸ¦m = bâŸ§ â‰¤ âŸ¦a = bâŸ§\text{ in}\\
    âŸ¦a = bâŸ§âˆ§Ïƒâ‚˜(b) &= âŸ¦a = bâŸ§âˆ§âŸ¦b = mâŸ§ â‰¤ âŸ¦a = mâŸ§ = Ïƒâ‚˜(a)\text.
  \end{align*}

  Relacija je oÄitno simetriÄna, tako da si poglejmo le tranzitivnost:
  \begin{align*}
    âŸ¦Ï = Ï„âŸ§âˆ§âŸ¦Ï„ = Î¸âŸ§
    &= \p{â‹_{a âˆˆ A} Ï(a)âˆ§Ï„(a)} âˆ§ \p{â‹_{a âˆˆ A} Ï„(a)âˆ§Î¸(a)}\\
    &= â‹_{a,a' âˆˆ A} Ï(a)âˆ§Ï„(a)âˆ§Ï„(a')âˆ§Î¸(a')\\
    &â‰¤ â‹_{a,a' âˆˆ A} Ï(a)âˆ§âŸ¦a = a'âŸ§âˆ§Î¸(a')\\
    &â‰¤ â‹_{a âˆˆ A} Ï(a)âˆ§Î¸(a) = âŸ¦Ï = Î¸âŸ§\text,
  \end{align*}
  kjer v drugi enakosti uporabimo, da je \(â„’\) okvir.
\end{dokaz}

\begin{lema}\label{lem:image}
  Vsak \(â„’\)-morfizem \(f : A â†¬ B\), \(a âˆˆ A\), in \(b âˆˆ B\) inducirajo
  \begin{enumerate}
  \item \(â„’\)-podmnoÅ¾ico \(fâ»Â¹(b) âŠ‘ A\), definirano z \(x â†¦ âŸ¦b = f(x)âŸ§\) in
  \item enojec \(f(a) âŠ‘ B\), definiran z \(y â†¦ âŸ¦y = f(a)âŸ§\).
  \end{enumerate}
\end{lema}
\begin{dokaz}
  % \begin{enumerate}
  % \item Prvi aksiom drÅ¾i, saj imamo \(âŸ¦a âˆˆ fâ»Â¹(b)âŸ§ = âŸ¦b = f(a)âŸ§ â‰¤ â€–aâ€–\), drugi
  %   %aksiom pa sledi iz drugega aksioma \(â„’\)-morfizmov.
  %   aksiom pa sledi iz aksioma \ref{M2}.
  % \item Prvi aksiom sledi iz celovitosti, drugi pa podobno kot zgoraj iz \ref{M1}.\qedhere
  % \end{enumerate}
  V obeh primerih prvi aksiom drÅ¾i zaradi celovitosti, drugi pa zaradi
  skladnosti morfizma z relacijo na ustrezni \(â„’\)-mnoÅ¾ici.
\end{dokaz}

\begin{lema}\label{lem:subst}
  Za \(â„’\)-podmnoÅ¾ico \(Ï† : A â†’ â„’\) velja \({Ï†(a) = â‹_{x âˆˆ A} Ï†(x)âˆ§âŸ¦x = aâŸ§}\).
  V posebnem za \(â„’\)-morfizem \(f : A â†¬ B\) velja \(âŸ¦b = f(a)âŸ§ = â‹_{x âˆˆ A} âŸ¦b = f(x)âŸ§âˆ§âŸ¦x = aâŸ§\).
\end{lema}
\begin{dokaz}
  Ker je \({Ï†(a) = Ï†(a)âˆ§âŸ¦a = aâŸ§}\) velja \( Ï†(a) â‰¤ â‹_{x âˆˆ A} Ï†(x)âˆ§âŸ¦x = aâŸ§\),
  obratna neenakost pa sledi iz drugega aksioma \(â„’\)-podmnoÅ¾ic.
\end{dokaz}

\begin{lema}\label{lem:sigmaunit}
  Za \(m,n âˆˆ A\) in \(Ï„ âˆˆ Ïƒ(A)\) veljajo naslednje enakosti:
  \begin{enumerate}
  \item \(Ïƒ_Ï„(Ïƒâ‚˜) = âŸ¦Ïƒâ‚˜ = Ï„âŸ§ = Ï„(m)\)
  \item \(âŸ¦Ïƒâ‚˜ = Ïƒâ‚™âŸ§ = âŸ¦m = nâŸ§\)
  \item \(Ïƒâ‚˜(n) = Ïƒâ‚™(m)\)
  \item \(âŸ¦m = nâŸ§ = â‹_{Ï„ âˆˆ Ïƒ(A)} Ï„(m)âˆ§Ï„(n)\)
  \end{enumerate}
\end{lema}
\begin{dokaz}
  Prvi enaÄaj velja po definiciji, tako da razpiÅ¡emo zgolj drugega:
  \begin{equation*}
    âŸ¦Ïƒâ‚˜ = Ï„âŸ§ = â‹_{a âˆˆ A} Ïƒâ‚˜(a)âˆ§Ï„(a) = â‹_{a âˆˆ A} âŸ¦m = aâŸ§âˆ§Ï„(a) = Ï„(m)\text,
  \end{equation*}
  kjer smo za zadnjo enakost uporabili gornjo lemo na \(â„’\)-podmnoÅ¾ici \(Ï„\).

  Enakost v drugi toÄki sledi iz \(âŸ¦Ïƒâ‚˜ = Ïƒâ‚™âŸ§ = Ïƒâ‚™(m) = âŸ¦m = nâŸ§\),
  tretja toÄka pa sledi po definiciji iz simetrÄnosti relacije.

  Oglejmo si Å¡e zadnjo toÄko. Neenakost \(â‰¥\) oÄitno sledi iz aksiomov enojcev,
  tako da moramo preveriti zgolj drugo smer:
  \begin{equation*}
    âŸ¦m = nâŸ§ = âŸ¦m = nâŸ§âˆ§âŸ¦n = mâŸ§ = Ïƒâ‚˜(n)âˆ§Ïƒâ‚™(m) â‰¤ â‹_{Ï„ âˆˆ Ïƒ(A)} Ï„(m)âˆ§Ï„(n)\qedhere
  \end{equation*}
\end{dokaz}

Kot smo rekli na zaÄetku podrazdelka, nam vsak enojec na \(F'\) enoliÄno doloÄa
element snopa \(F\). Prav tako pa enojci na \(F\) enoliÄno doloÄajo elemente
\(F\). ÄŒe torej Å¾elimo dopolniti \(â„’\)-mnoÅ¾ico do celega snopa, moramo vzeti
njeno mnoÅ¾ico enojcev, oziroma bolj natanÄno, so polne \(â„’\)-mnoÅ¾ice take, kjer
nam enojci ne predstavljajo nobenih novih elementov. % nobenih drugih elementov
                                % kot elementov \(â„’\)-mnoÅ¾ice same.

\begin{definicija}
  \(â„’\)-mnoÅ¾ica \(A\) je \emph{polna}, kadar je preslikava mnoÅ¾ic \(m â†¦ Ïƒâ‚˜\)
  bijekcija. Polno podkategorijo polnih \(â„’\)-mnoÅ¾ic oznaÄimo s
  \(\cat{CSet}(â„’)\).
\end{definicija}
% NOTE: Ïƒ definira idempotentno monado. To mi avtomatsko da naslednjih par
% rezultatov (specifiÄno do izreka da so polne â„’-mnoÅ¾ice refleksivna
% podkategorija).
\begin{lema}
  \(â„’\)-mnoÅ¾ica \(Ïƒ(A)\) je polna.
\end{lema}
\begin{dokaz}
  Pokazati moramo, da je preslikava \(Ï„ â†¦ Ïƒ_Ï„\) bijekcija.
  % TODO: reword
  Injektivnost:
  Denimo, da velja \(Ïƒ_Ï„ = Ïƒ_Ï\). Potem velja
  \begin{equation*}
    Ï„(a) = Ïƒ_Ï„(Ïƒâ‚) = Ïƒ_Ï(Ïƒâ‚) = Ï(a)\text,
  \end{equation*}
  torej je preslikava injektivna.
  % NOTE: to je inverz enote (in je mnoÅ¾enje).
  Naj bo sedaj \(Î£ âˆˆ ÏƒÏƒ(A)\). Definirajmo \(Ï„(a) â‰” Î£(Ïƒâ‚)\).
  To je enojec, saj velja
  \begin{align*}
    Ï„(a)âˆ§Ï„(b) &= Î£(Ïƒâ‚)âˆ§Î£(Ïƒ_b) â‰¤ âŸ¦Ïƒâ‚ = Ïƒ_bâŸ§ = âŸ¦a = bâŸ§\text{ in}\\
    âŸ¦a = bâŸ§âˆ§Ï„(b) &= âŸ¦a = bâŸ§âˆ§Î£(Ïƒ_b) = âŸ¦Ïƒâ‚ = Ïƒ_bâŸ§âˆ§Î£(Ïƒ_b) â‰¤ Î£(Ïƒâ‚) = Ï„(a)\text.
  \end{align*}

  PokaÅ¾imo Å¡e, da je \(Î£ = Ïƒ_Ï„\).
  \begin{align*}
    Ïƒ_Ï„(Ï)
    &= âŸ¦Ï„ = ÏâŸ§ = â‹_{a âˆˆ A} Ï„(a)âˆ§Ï(a) = â‹_{a âˆˆ A} Î£(Ïƒâ‚)âˆ§âŸ¦Ï = Ïƒâ‚âŸ§\\
    &= â‹_{a âˆˆ A} Î£(Ï)âˆ§âŸ¦Ï = Ïƒâ‚âŸ§ = Î£(Ï)âˆ§â€–Ïâ€– = Î£(Ï)\text,
  \end{align*}
  kjer za tretjo enakost uporabimo, da lahko pod enakostjo menjamo argumente \mbox{\(â„’\)-podmnoÅ¾icam}.
  Sledi, da za vsak enojec v \(ÏƒÏƒ(A)\) obstaja natanko en enojec v \(Ïƒ(A)\), ki
  se vanj slika, tako da je preslikava \(Ïƒ\) res bijekcija, in je \(Ïƒ(A)\) polna.
\end{dokaz}

\begin{trditev}
  Naj bo \(f : A â†¬ B \) in \(B\) polna \(â„’\)-mnoÅ¾ica. Tedaj obstaja preslikava
  \(Ï† : A â†’ B\), za katero velja \(âŸ¦b = f(a)âŸ§ = âŸ¦b =_B Ï†(a)âŸ§\).
  Poleg tega velja tudi \(âŸ¦Ï†(a) = Ï†(a')âŸ§ â‰¥ âŸ¦a = a'âŸ§\), in enakost drÅ¾i kadar je \(a = a'\).
\end{trditev}
\begin{dokaz}
  Za vsak \(a âˆˆ A\) je \(b â†¦ âŸ¦b = f(a)âŸ§\) enojec, torej po polnosti \(B\)
  natanko doloÄa en element \(B\), ki ga oznaÄimo \(Ï†(a)\). To definira
  preslikavo \(Ï†\).
  % TODO: neenakosti?
\end{dokaz}
\begin{posledica}
  Kategorija polnih \(â„’\)-mnoÅ¾ic je ekvivalentna kategoriji, katere
  \catdef
    {so polne \(â„’\)-mnoÅ¾ice in}
    {\(A â†’ B\) so funkcije \(f : A â†’ B\), ki zadoÅ¡Äajo sledeÄima pogojema:
      \begin{itemize}
      \item \(âŸ¦a = a'âŸ§ â‰¤ âŸ¦f(a) = f(a')âŸ§\), in
      \item \(âŸ¦a = aâŸ§ = âŸ¦f(a) = f(a)âŸ§\).
      \end{itemize}}
    %\newline
    %\begin{tabular}{l}
    %  \(âŸ¦a = a'âŸ§ â‰¤ âŸ¦f(a) = f(a')âŸ§\)\\
    %  \(âŸ¦a = aâŸ§ = âŸ¦f(a) = f(a)âŸ§\)
    %\end{tabular}}
\end{posledica}

\begin{izrek}\label{th:sigmaiso}
  \(â„’\)-mnoÅ¾ica \(Ïƒ(A)\) je izomorfna \(A\).
\end{izrek}
\begin{dokaz}
  % NOTE: f je enota monade Ïƒ, Äe je g njen inverz, kaj je njena povezava z
  % mnoÅ¾enjem? Plus lahko spustimo pol dokazov, da je f morfizem.
  Definirajmo preslikavo \(âŸ¦Ï„ = Î·(a)âŸ§ = Ï„(a)\).
  OÄitno je skladna z relacijama, tako da moramo preveriti zgolj
  enoliÄnost in celovitost. EnoliÄnost sledi iz neenakosti
  \(Ï„(a)âˆ§Ï(a) â‰¤ âŸ¦Ï„ = ÏâŸ§\), celovitost pa iz enakosti
  \[ âŸ¦a = aâŸ§ = âŸ¦Ïƒâ‚ = Ïƒâ‚âŸ§ = â‹_{Ï„ âˆˆ Ïƒ(A)} âŸ¦Ïƒâ‚ = Ï„âŸ§ = â‹_{Ï„ âˆˆ Ïƒ(A)} Ï„(a)\text. \]
  
  Preveriti moramo torej le Å¡e, da je bijekcija. Injektivna je oÄitno, saj to
  sledi iz definicije enojca, surjektivnost pa sledi iz
  \(âŸ¦Ïƒâ‚ = Î·(a)âŸ§ = Ïƒâ‚(a) = â€–aâ€–\).
\end{dokaz}
\begin{posledica}
  Kategorija \(â„’\)-mnoÅ¾ic je ekvivalentna kategoriji polnih \(â„’\)-mnoÅ¾ic.
\end{posledica}

\begin{lema}
  Polne \(â„’\)-mnoÅ¾ice imajo operator zoÅ¾itve, t.~j. za vsak \(m âˆˆ A\) in
  \(U âˆˆ â„’\) obstaja \(m{\res U} âˆˆ A\), tako da velja \(âŸ¦a = m{\res U}âŸ§ = âŸ¦a = mâŸ§âˆ§U\).
  V posebnem torej tudi velja \(â€–m{\res U}â€– = â€–mâ€–âˆ§U\) in \(m{\res U\res V} = m{\res{Uâˆ§V}}\).
\end{lema}
\begin{dokaz}
  Tvorimo kar \(Ï„(a) = âŸ¦a = mâŸ§âˆ§U\). To je enojec, saj
  \begin{align*}
    Ï„(a)âˆ§Ï„(b) &= âŸ¦a = mâŸ§âˆ§Uâˆ§âŸ¦b = mâŸ§âˆ§U â‰¤ âŸ¦a = bâŸ§\text{ in}\\
    âŸ¦a = bâŸ§âˆ§Ï„(b) &= âŸ¦a = bâŸ§âˆ§âŸ¦b = mâŸ§âˆ§U â‰¤ âŸ¦a = mâŸ§âˆ§U = Ï„(a)\text.
  \end{align*}
  Ker je \(A\) polna, ta ustreza nekemu elementu, ki mu lahko reÄemo
  \(m{\res U}\), zanj pa oÄitno velja Å¾eljena enakost
  \begin{equation*}
    âŸ¦a = m{\res U}âŸ§ = âŸ¦Ïƒâ‚ = Ï„âŸ§ = Ï„(a) = âŸ¦a = mâŸ§âˆ§U\text. \qedhere
  \end{equation*}
\end{dokaz}
\begin{posledica}
  Za \(m âˆˆ A\) in \(U âˆˆ â„’\) velja \(Ïƒâ‚˜{\res U}(n) = Ïƒâ‚˜(n)âˆ§U\).
\end{posledica}
\begin{posledica}
  Za \(Ï„ âˆˆ Ïƒ(A)\) in \(U âˆˆ â„’\) velja \(Ïƒ_Ï„{\res U} = Ïƒ_{Ï„{\res U}}\).
\end{posledica}

\begin{lema}
  Polne \(â„’\)-mnoÅ¾ice imajo lepljenje skladnih druÅ¾in, t.~j. za vsako druÅ¾ino
  \(máµ¢ âˆˆ A\), za katero velja \(máµ¢{\res{Uâ±¼}} = mâ±¼{\res{Uáµ¢}}\), kjer je \(Uáµ¢ â‰” â€–máµ¢â€–\),
  obstaja tak \(m âˆˆ A\), da je \(m{\res{Uáµ¢}} = máµ¢\).
  %\(máµ¢ âˆˆ A\) za katero velja \(âŸ¦máµ¢ = mâ±¼âŸ§ = â€–máµ¢â€–âˆ§â€–mâ±¼â€–\) obstaja nek \(m âˆˆ A\),
  %tako da je \(âŸ¦m = máµ¢âŸ§ = â€–máµ¢â€–\) in \(â€–mâ€– = â‹áµ¢â€–máµ¢â€–\).
\end{lema}
\begin{dokaz}
  Naj bodo \(máµ¢\) taki in tvorimo preslikavo \(Ï„(a) = â‹áµ¢âŸ¦a = máµ¢âŸ§\).
  Iz skladnosti druÅ¾ine sledi, da velja
  \[ âŸ¦a = máµ¢âŸ§âˆ§Uâ±¼ = âŸ¦a = máµ¢{\res{Uâ±¼}}âŸ§ = âŸ¦a = mâ±¼{\res{Uáµ¢}}âŸ§ = âŸ¦a = mâ±¼âŸ§âˆ§Uáµ¢\text. \]
  
  Preslikava \(Ï„\) je enojec, saj velja
  \begin{align*}
    âŸ¦a = bâŸ§âˆ§Ï„(b)
    &= â‹áµ¢âŸ¦a = bâŸ§âˆ§âŸ¦b = máµ¢âŸ§ â‰¤ â‹áµ¢âŸ¦a = máµ¢âŸ§ = Ï„(a)\text{ in}\\
    Ï„(a)âˆ§Ï„(b)
    &= â‹áµ¢â±¼âŸ¦a = máµ¢âŸ§âˆ§âŸ¦b = mâ±¼âŸ§\\
    &= â‹áµ¢â±¼âŸ¦a = máµ¢âŸ§âˆ§Uáµ¢âˆ§âŸ¦b = mâ±¼âŸ§âˆ§Uâ±¼\\
    &= â‹áµ¢â±¼âŸ¦a = máµ¢âŸ§âˆ§Uâ±¼âˆ§âŸ¦b = mâ±¼âŸ§âˆ§Uáµ¢\\
    &= â‹áµ¢âŸ¦a = máµ¢âŸ§âˆ§âŸ¦b = máµ¢âŸ§ â‰¤ âŸ¦a = bâŸ§\text,
  \end{align*}
  torej ustreza nekemu \(m âˆˆ A\). Po zgornji lemi velja
  \begin{equation*}
    âŸ¦máµ¢ = m{\res{Uáµ¢}}âŸ§ = âŸ¦máµ¢ = mâŸ§âˆ§Uáµ¢ = Ïƒâ‚˜(máµ¢)âˆ§Uáµ¢ = \textstyleâ‹\!â±¼âŸ¦máµ¢ = mâ±¼âŸ§âˆ§Uáµ¢ = Uáµ¢\text,
  \end{equation*}
  torej se ujemata na celotnem razponu in sta enaka.

  Razpon \(m\) je \(â€–mâ€– = Ïƒâ‚˜(m) = â‹áµ¢âŸ¦m = máµ¢âŸ§ = â‹áµ¢Uáµ¢\), kar mora veljati za vsako
  amalgamacijo druÅ¾ine \(máµ¢\), tako da je \(m\) tudi enoliÄen.
\end{dokaz}

\begin{konstrukcija}
  Naj bo \(A\) \(â„’\)-mnoÅ¾ica. Potem ji lahko priredimo snop
  \[ Î˜(A)(U) = \set{Ï„ âˆˆ Ïƒ(A)}{â€–Ï„â€– = U}\text. \]
  Morfizmu \(f : A â†¬ B\) \(â„’\)-mnoÅ¾ic priredimo preslikavo
  % NOTE: to je morphism action Ïƒ, torej Î˜ je Iâˆ˜Ïƒ, kjer I predstavlja renotation
  % polne â„’-mnoÅ¾ice v snop
  \[ Î˜(f)_U(Ï„)(b) â‰” Ï(b) = â‹_{a âˆˆ A}âŸ¦b = f(a)âŸ§âˆ§Ï„(a)\text. \]
  To je res enojec na \(B\), saj velja
  \begin{align*}
    âŸ¦b' = bâŸ§âˆ§Ï(b)
    &= â‹_{a âˆˆ A}âŸ¦b' = bâŸ§âˆ§âŸ¦b = f(a)âŸ§ â‰¤ â‹_{a âˆˆ A}âŸ¦b' = f(a)âŸ§ = Ï(b')\text{ in}\\
    Ï(b)âˆ§Ï(b')
    &= â‹_{a,a' âˆˆ A} âŸ¦b = f(a)âŸ§âˆ§Ï„(a)âˆ§Ï„(a')âˆ§âŸ¦b' = f(a')âŸ§\\
    &â‰¤ â‹_{a,a' âˆˆ A} âŸ¦b = f(a)âŸ§âˆ§âŸ¦a = a'âŸ§âˆ§âŸ¦b' = f(a')âŸ§\\
    &â‰¤ â‹_{a' âˆˆ A} âŸ¦b = f(a')âŸ§âˆ§âŸ¦b' = f(a')âŸ§ â‰¤ âŸ¦b = b'âŸ§\text.
  \end{align*}
  To definira funktor med kategorijama \(\cat{Set}(â„’)\) in \(\cat{Sh}(â„’)\).
\end{konstrukcija}

\begin{konstrukcija}
  Naj bo \(P\) predsnop. Potem mu lahko priredimo \(â„’\)-mnoÅ¾ico
  \(Î“(P) â‰” âˆ‘_{U âˆˆ â„’} P(U)\) z relacijo
  % NOTE: ta je pa zgolj renotation predsnopa v â„’-mnoÅ¾ico, tako da je od
  % adjunkcije samo Ïƒ.
  \[ âŸ¦\p{U, f} = \p{V, g}âŸ§ â‰” â‹\set{W âˆˆ â„’}{Wâ‰¤Uâˆ§V \text{ in } f\res W = g\res W}\text. \]
  % TODO: dokaÅ¾i polnost
  Morfizmu predsnopov \(Î± : P â‡’ Q\) priredimo preslikavo \(Î“(Î±)(U, f) â‰” Î±_U(f)\).
  To definira funktor med kategorijama \(\cat{PSh}(â„’)\) in \(\cat{Set}(â„’)\).
\end{konstrukcija}

\begin{trditev}
  Funktor \(Î“\) je levi adjunkt funktorju \(Î˜\).
\end{trditev}
\begin{dokaz}
  % Naj bo \(Ï† : Î˜(A) â†’ P\) morfizem predsnopov. Definirati Å¾elimo morfizem
  % \mbox{\(â„’\)-mnoÅ¾ic} \(A â†¬ Î“(P)\).
  % Elementoma \(a âˆˆ A\) z \(â€–aâ€– = U\) in \(\p{V, f} âˆˆ Î“(P)\) lahko priredimo
  % \(âŸ¦f = Ï†_U(Ïƒâ‚)âŸ§\).
  % To je oÄitno morfizem \(â„’\)-mnoÅ¾ic.
  
  % Obratno, naj bo \(Ï† : A â†¬ Î“(P)\) morfizem \(â„’\)-mnoÅ¾ic.
  % Tedaj elementu \(Ï„ âˆˆ Î˜(A)(U)\) priredimo element \(\).
  % To spet oÄitno definira morfizem snopov, tako da sta funktorja \(Î˜\) in \(Î“\)
  % res adjungirana in definirata ekvivalenco Å¾eljenih kategorij.
  % % TODO: correct this detail
  % Naj bo \(Ï† : P â‡’ Î˜(A)\). Potem \(âŸ¦a = f\p{U, p}âŸ§ â‰” Ï†_U(p)(a)\) definira
  % morfizem \(â„’\)-mnoÅ¾ic \(Î“(P) â†¬ A\), saj velja \(Ï†_U(p)(a) = âŸ¦Ïƒâ‚ = Ï†_U(p)âŸ§\).
 
  % Obratno, naj bo \(f : Î“(P) â†¬ A\). Morfizem predsnopov \(Ï† : P â‡’ Î˜(A)\)
  % konstruiramo kot \(Ï†_U(p) â‰” âŸ¦- = f\p{U, p}âŸ§\), ki je enojec na \(A\).
  % Razpon tega enojca je pa \(â‹_{a âˆˆ A} âŸ¦a = f\p{U, p}âŸ§ = â€–\p{U,p}â€– = U\).

  % Ti prireditvi sta si oÄitno inverzni, tako da definirata adjunkcijo \(Î“ âŠ£ Î˜\).
  Koenota adjunkcije je izomorfizem iz izreka \ref{th:sigmaiso},
  enota pa slika \(p âˆˆ P(U)\) v \(Ïƒ_{(U,p)}\). To je naravna
  transformacija, saj \(Ïƒ\) \quot{komutira} z zoÅ¾itvami.
\end{dokaz}

\begin{izrek}
  Kategorija polnih \(â„’\)-mnoÅ¾ic je ekvivalentna kategoriji snopov nad \(â„’\).
\end{izrek}
\begin{dokaz}
  ÄŒe funktorja \(Î“\) in \(Î˜\) zoÅ¾imo na dani kategoriji, sta si spet
  adjungirana, tako da moramo zgolj pokazati, da sta enota in koenota
  izomorfizma.

  Koenota je Å¾e izomorfizem po \ref{th:sigmaiso}, tako da moramo preveriti zgolj
  enoto.

  Naj bo \(F\) snop. Potem \(Î·_U : F(U) â†’ Î˜Î“(F)(U)\) slika \(f â†¦ Ïƒ_{(U,f)}\).
  Ker je \(F\) snop je \(â„’\)-mnoÅ¾ica \(Î“(F)\) Å¾e polna, tako da so elementi
  \(Î˜Î“(F)(U)\) Å¾e natanko elementi \(Î“(F)\) z razponom \(U\), ki so pa natanko
  elementi \(F(U)\), torej je tudi enota izomorfizem.
\end{dokaz}

%%% Local Variables:
%%% TeX-master: "main"
%%% End:
